!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.MapdDraw=e():t.MapdDraw=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.simpleHull_2D=e.Math=e.Point=e.PolyLine=e.Poly=e.Rect=e.Circle=e.Vec2d=e.BasicStyle=e.Mat2=e.Point2d=e.Mat2d=e.AABox2d=e.DrawEngine=e.ShapeBuilder=e.version=void 0;var o=r(30);Object.defineProperty(e,"version",{enumerable:!0,get:function(){return o.version}});var a=r(1);Object.defineProperty(e,"Mat2",{enumerable:!0,get:function(){return a.mat2}});var s=r(14);Object.defineProperty(e,"simpleHull_2D",{enumerable:!0,get:function(){return s.simpleHull_2D}});var u=r(19),l=i(u),c=r(13),h=i(c),f=r(2),d=n(f),p=r(4),v=i(p),_=r(3),y=n(_),b=r(8),m=i(b),g=r(9),M=i(g),O=r(23),w=i(O),x=r(15),E=i(x),k=r(25),S=i(k),P=r(10),C=i(P),A=r(24),I=i(A),j=r(5),D=i(j);e.ShapeBuilder=l.default,e.DrawEngine=h.default,e.AABox2d=d,e.Mat2d=v.default,e.Point2d=y,e.BasicStyle=m.default,e.Vec2d=M.default,e.Circle=w.default,e.Rect=E.default,e.Poly=S.default,e.PolyLine=C.default,e.Point=I.default,e.Math=D.default},function(t,e,r){/*!
	@fileoverview gl-matrix - High performance matrix and vector operations
	@author Brandon Jones
	@author Colin MacKenzie IV
	@version 2.7.0
	
	Copyright (c) 2015-2018, Brandon Jones, Colin MacKenzie IV.
	
	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:
	
	The above copyright notice and this permission notice shall be included in
	all copies or substantial portions of the Software.
	
	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
	THE SOFTWARE.
	
	*/
!function(e,r){t.exports=r()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var i in t)e.d(n,i,function(e){return t[e]}.bind(null,i));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=10)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=function(t){e.ARRAY_TYPE=t},e.toRadian=function(t){return t*i},e.equals=function(t,e){return Math.abs(t-e)<=n*Math.max(1,Math.abs(t),Math.abs(e))};var n=e.EPSILON=1e-6;e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,e.RANDOM=Math.random;var i=Math.PI/180},function(t,e,r){"use strict";function n(){var t=new h.ARRAY_TYPE(4);return h.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function o(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function a(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function s(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+o*o)}function u(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+i*i+o*o}function l(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)}function c(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=n,e.clone=function(t){var e=new h.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,r,n){var i=new h.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},e.subtract=i,e.multiply=o,e.divide=a,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},e.distance=s,e.squaredDistance=u,e.length=l,e.squaredLength=c,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=o*a),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,r,n){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t[3]=s+n*(r[3]-s),t},e.random=function(t,e){var r,n,i,o,a,s;e=e||1;do r=2*h.RANDOM()-1,n=2*h.RANDOM()-1,a=r*r+n*n;while(a>=1);do i=2*h.RANDOM()-1,o=2*h.RANDOM()-1,s=i*i+o*o;while(s>=1);var u=Math.sqrt((1-a)/s);return t[0]=e*r,t[1]=e*n,t[2]=e*i*u,t[3]=e*o*u,t},e.transformMat4=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,t},e.transformQuat=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2],l=r[3],c=l*n+s*o-u*i,h=l*i+u*n-a*o,f=l*o+a*i-s*n,d=-a*n-s*i-u*o;return t[0]=c*l+d*-a+h*-u-f*-s,t[1]=h*l+d*-s+f*-a-c*-u,t[2]=f*l+d*-u+c*-s-h*-a,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],l=e[3];return Math.abs(r-a)<=h.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-s)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=h.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-l)<=h.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))};var h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.sub=i,e.mul=o,e.div=a,e.dist=s,e.sqrDist=u,e.len=l,e.sqrLen=c,e.forEach=function(){var t=n();return function(e,r,n,i,o,a){var s=void 0,u=void 0;for(r||(r=4),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}()},function(t,e,r){"use strict";function n(){var t=new p.ARRAY_TYPE(3);return p.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function i(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function o(t,e,r){var n=new p.ARRAY_TYPE(3);return n[0]=t,n[1]=e,n[2]=r,n}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function s(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function u(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function l(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)}function c(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function h(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function f(t,e){var r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function d(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=n,e.clone=function(t){var e=new p.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=i,e.fromValues=o,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},e.subtract=a,e.multiply=s,e.divide=u,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},e.distance=l,e.squaredDistance=c,e.squaredLength=h,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=f,e.dot=d,e.cross=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2];return t[0]=i*u-o*s,t[1]=o*a-n*u,t[2]=n*s-i*a,t},e.lerp=function(t,e,r,n){var i=e[0],o=e[1],a=e[2];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t},e.hermite=function(t,e,r,n,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,l=a*(o-1),c=a*(3-2*o);return t[0]=e[0]*s+r[0]*u+n[0]*l+i[0]*c,t[1]=e[1]*s+r[1]*u+n[1]*l+i[1]*c,t[2]=e[2]*s+r[2]*u+n[2]*l+i[2]*c,t},e.bezier=function(t,e,r,n,i,o){var a=1-o,s=a*a,u=o*o,l=s*a,c=3*o*s,h=3*u*a,f=u*o;return t[0]=e[0]*l+r[0]*c+n[0]*h+i[0]*f,t[1]=e[1]*l+r[1]*c+n[1]*h+i[1]*f,t[2]=e[2]*l+r[2]*c+n[2]*h+i[2]*f,t},e.random=function(t,e){e=e||1;var r=2*p.RANDOM()*Math.PI,n=2*p.RANDOM()-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t},e.transformMat4=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,t[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,t},e.transformMat3=function(t,e,r){var n=e[0],i=e[1],o=e[2];return t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8],t},e.transformQuat=function(t,e,r){var n=r[0],i=r[1],o=r[2],a=r[3],s=e[0],u=e[1],l=e[2],c=i*l-o*u,h=o*s-n*l,f=n*u-i*s,d=i*f-o*h,p=o*c-n*f,v=n*h-i*c,_=2*a;return c*=_,h*=_,f*=_,d*=2,p*=2,v*=2,t[0]=s+c+d,t[1]=u+h+p,t[2]=l+f+v,t},e.rotateX=function(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},e.rotateY=function(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},e.rotateZ=function(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},e.angle=function(t,e){var r=o(t[0],t[1],t[2]),n=o(e[0],e[1],e[2]);f(r,r),f(n,n);var i=d(r,n);return i>1?0:i<-1?Math.PI:Math.acos(i)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){var r=t[0],n=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(r-o)<=p.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=p.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=p.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))};var p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.sub=a,e.mul=s,e.div=u,e.dist=l,e.sqrDist=c,e.len=i,e.sqrLen=h,e.forEach=function(){var t=n();return function(e,r,n,i,o,a){var s=void 0,u=void 0;for(r||(r=3),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}()},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(){var t=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function o(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function a(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=r[0],u=r[1],l=r[2],c=r[3];return t[0]=n*c+a*s+i*l-o*u,t[1]=i*c+a*u+o*s-n*l,t[2]=o*c+a*l+n*u-i*s,t[3]=a*c-n*s-i*u-o*l,t}function s(t,e,r,n){var i=e[0],o=e[1],a=e[2],s=e[3],u=r[0],c=r[1],h=r[2],f=r[3],d=void 0,p=void 0,v=void 0,_=void 0,y=void 0;return(p=i*u+o*c+a*h+s*f)<0&&(p=-p,u=-u,c=-c,h=-h,f=-f),1-p>l.EPSILON?(d=Math.acos(p),v=Math.sin(d),_=Math.sin((1-n)*d)/v,y=Math.sin(n*d)/v):(_=1-n,y=n),t[0]=_*i+y*u,t[1]=_*o+y*c,t[2]=_*a+y*h,t[3]=_*s+y*f,t}function u(t,e){var r=e[0]+e[4]+e[8],n=void 0;if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.setAxes=e.sqlerp=e.rotationTo=e.equals=e.exactEquals=e.normalize=e.sqrLen=e.squaredLength=e.len=e.length=e.lerp=e.dot=e.scale=e.mul=e.add=e.set=e.copy=e.fromValues=e.clone=void 0,e.create=i,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=o,e.getAxisAngle=function(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return n>l.EPSILON?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r},e.multiply=a,e.rotateX=function(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-n*s,t},e.rotateY=function(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u-o*s,t[1]=i*u+a*s,t[2]=o*u+n*s,t[3]=a*u-i*s,t},e.rotateZ=function(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*s,t[1]=i*u-n*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t},e.calculateW=function(t,e){var r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t},e.slerp=s,e.random=function(t){var e=l.RANDOM(),r=l.RANDOM(),n=l.RANDOM(),i=Math.sqrt(1-e),o=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*r),t[1]=i*Math.cos(2*Math.PI*r),t[2]=o*Math.sin(2*Math.PI*n),t[3]=o*Math.cos(2*Math.PI*n),t},e.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o,s=a?1/a:0;return t[0]=-r*s,t[1]=-n*s,t[2]=-i*s,t[3]=o*s,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=u,e.fromEuler=function(t,e,r,n){var i=.5*Math.PI/180;e*=i,r*=i,n*=i;var o=Math.sin(e),a=Math.cos(e),s=Math.sin(r),u=Math.cos(r),l=Math.sin(n),c=Math.cos(n);return t[0]=o*u*c-a*s*l,t[1]=a*s*c+o*u*l,t[2]=a*u*l-o*s*c,t[3]=a*u*c+o*s*l,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var l=n(r(0)),c=n(r(5)),h=n(r(2)),f=n(r(1));e.clone=f.clone,e.fromValues=f.fromValues,e.copy=f.copy,e.set=f.set,e.add=f.add,e.mul=a,e.scale=f.scale,e.dot=f.dot,e.lerp=f.lerp;var d=e.length=f.length,p=(e.len=d,e.squaredLength=f.squaredLength),v=(e.sqrLen=p,e.normalize=f.normalize);e.exactEquals=f.exactEquals,e.equals=f.equals,e.rotationTo=function(){var t=h.create(),e=h.fromValues(1,0,0),r=h.fromValues(0,1,0);return function(n,i,a){var s=h.dot(i,a);return s<-.999999?(h.cross(t,e,i),h.len(t)<1e-6&&h.cross(t,r,i),h.normalize(t,t),o(n,t,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(h.cross(t,i,a),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+s,v(n,n))}}(),e.sqlerp=function(){var t=i(),e=i();return function(r,n,i,o,a,u){return s(t,n,a,u),s(e,i,o,u),s(r,t,e,2*u*(1-u)),r}}(),e.setAxes=function(){var t=c.create();return function(e,r,n,i){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],v(e,u(e,t))}}()},function(t,e,r){"use strict";function n(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function i(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],d=e[10],p=e[11],v=e[12],_=e[13],y=e[14],b=e[15],m=r[0],g=r[1],M=r[2],O=r[3];return t[0]=m*n+g*s+M*h+O*v,t[1]=m*i+g*u+M*f+O*_,t[2]=m*o+g*l+M*d+O*y,t[3]=m*a+g*c+M*p+O*b,m=r[4],g=r[5],M=r[6],O=r[7],t[4]=m*n+g*s+M*h+O*v,t[5]=m*i+g*u+M*f+O*_,t[6]=m*o+g*l+M*d+O*y,t[7]=m*a+g*c+M*p+O*b,m=r[8],g=r[9],M=r[10],O=r[11],t[8]=m*n+g*s+M*h+O*v,t[9]=m*i+g*u+M*f+O*_,t[10]=m*o+g*l+M*d+O*y,t[11]=m*a+g*c+M*p+O*b,m=r[12],g=r[13],M=r[14],O=r[15],t[12]=m*n+g*s+M*h+O*v,t[13]=m*i+g*u+M*f+O*_,t[14]=m*o+g*l+M*d+O*y,t[15]=m*a+g*c+M*p+O*b,t}function o(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=n+n,u=i+i,l=o+o,c=n*s,h=n*u,f=n*l,d=i*u,p=i*l,v=o*l,_=a*s,y=a*u,b=a*l;return t[0]=1-(d+v),t[1]=h+b,t[2]=f-y,t[3]=0,t[4]=h-b,t[5]=1-(c+v),t[6]=p+_,t[7]=0,t[8]=f+y,t[9]=p-_,t[10]=1-(c+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new s.ARRAY_TYPE(16);return s.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},e.clone=function(t){var e=new s.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,r,n,i,o,a,u,l,c,h,f,d,p,v,_){var y=new s.ARRAY_TYPE(16);return y[0]=t,y[1]=e,y[2]=r,y[3]=n,y[4]=i,y[5]=o,y[6]=a,y[7]=u,y[8]=l,y[9]=c,y[10]=h,y[11]=f,y[12]=d,y[13]=p,y[14]=v,y[15]=_,y},e.set=function(t,e,r,n,i,o,a,s,u,l,c,h,f,d,p,v,_){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=l,t[9]=c,t[10]=h,t[11]=f,t[12]=d,t[13]=p,t[14]=v,t[15]=_,t},e.identity=n,e.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],v=e[13],_=e[14],y=e[15],b=r*s-n*a,m=r*u-i*a,g=r*l-o*a,M=n*u-i*s,O=n*l-o*s,w=i*l-o*u,x=c*v-h*p,E=c*_-f*p,k=c*y-d*p,S=h*_-f*v,P=h*y-d*v,C=f*y-d*_,A=b*C-m*P+g*S+M*k-O*E+w*x;return A?(A=1/A,t[0]=(s*C-u*P+l*S)*A,t[1]=(i*P-n*C-o*S)*A,t[2]=(v*w-_*O+y*M)*A,t[3]=(f*O-h*w-d*M)*A,t[4]=(u*k-a*C-l*E)*A,t[5]=(r*C-i*k+o*E)*A,t[6]=(_*g-p*w-y*m)*A,t[7]=(c*w-f*g+d*m)*A,t[8]=(a*P-s*k+l*x)*A,t[9]=(n*k-r*P-o*x)*A,t[10]=(p*O-v*g+y*b)*A,t[11]=(h*g-c*O-d*b)*A,t[12]=(s*E-a*S-u*x)*A,t[13]=(r*S-n*E+i*x)*A,t[14]=(v*m-p*M-_*b)*A,t[15]=(c*M-h*m+f*b)*A,t):null},e.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],v=e[13],_=e[14],y=e[15];return t[0]=s*(f*y-d*_)-h*(u*y-l*_)+v*(u*d-l*f),t[1]=-(n*(f*y-d*_)-h*(i*y-o*_)+v*(i*d-o*f)),t[2]=n*(u*y-l*_)-s*(i*y-o*_)+v*(i*l-o*u),t[3]=-(n*(u*d-l*f)-s*(i*d-o*f)+h*(i*l-o*u)),t[4]=-(a*(f*y-d*_)-c*(u*y-l*_)+p*(u*d-l*f)),t[5]=r*(f*y-d*_)-c*(i*y-o*_)+p*(i*d-o*f),t[6]=-(r*(u*y-l*_)-a*(i*y-o*_)+p*(i*l-o*u)),t[7]=r*(u*d-l*f)-a*(i*d-o*f)+c*(i*l-o*u),t[8]=a*(h*y-d*v)-c*(s*y-l*v)+p*(s*d-l*h),t[9]=-(r*(h*y-d*v)-c*(n*y-o*v)+p*(n*d-o*h)),t[10]=r*(s*y-l*v)-a*(n*y-o*v)+p*(n*l-o*s),t[11]=-(r*(s*d-l*h)-a*(n*d-o*h)+c*(n*l-o*s)),t[12]=-(a*(h*_-f*v)-c*(s*_-u*v)+p*(s*f-u*h)),t[13]=r*(h*_-f*v)-c*(n*_-i*v)+p*(n*f-i*h),t[14]=-(r*(s*_-u*v)-a*(n*_-i*v)+p*(n*u-i*s)),t[15]=r*(s*f-u*h)-a*(n*f-i*h)+c*(n*u-i*s),t},e.determinant=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],f=t[11],d=t[12],p=t[13],v=t[14],_=t[15];return(e*a-r*o)*(h*_-f*v)-(e*s-n*o)*(c*_-f*p)+(e*u-i*o)*(c*v-h*p)+(r*s-n*a)*(l*_-f*d)-(r*u-i*a)*(l*v-h*d)+(n*u-i*s)*(l*p-c*d)},e.multiply=i,e.translate=function(t,e,r){var n=r[0],i=r[1],o=r[2],a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,h=void 0,f=void 0,d=void 0,p=void 0,v=void 0,_=void 0,y=void 0;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*o+e[12],t[13]=e[1]*n+e[5]*i+e[9]*o+e[13],t[14]=e[2]*n+e[6]*i+e[10]*o+e[14],t[15]=e[3]*n+e[7]*i+e[11]*o+e[15]):(a=e[0],s=e[1],u=e[2],l=e[3],c=e[4],h=e[5],f=e[6],d=e[7],p=e[8],v=e[9],_=e[10],y=e[11],t[0]=a,t[1]=s,t[2]=u,t[3]=l,t[4]=c,t[5]=h,t[6]=f,t[7]=d,t[8]=p,t[9]=v,t[10]=_,t[11]=y,t[12]=a*n+c*i+p*o+e[12],t[13]=s*n+h*i+v*o+e[13],t[14]=u*n+f*i+_*o+e[14],t[15]=l*n+d*i+y*o+e[15]),t},e.scale=function(t,e,r){var n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,r,n){var i=n[0],o=n[1],a=n[2],u=Math.sqrt(i*i+o*o+a*a),l=void 0,c=void 0,h=void 0,f=void 0,d=void 0,p=void 0,v=void 0,_=void 0,y=void 0,b=void 0,m=void 0,g=void 0,M=void 0,O=void 0,w=void 0,x=void 0,E=void 0,k=void 0,S=void 0,P=void 0,C=void 0,A=void 0,I=void 0,j=void 0;return u<s.EPSILON?null:(i*=u=1/u,o*=u,a*=u,l=Math.sin(r),c=Math.cos(r),h=1-c,f=e[0],d=e[1],p=e[2],v=e[3],_=e[4],y=e[5],b=e[6],m=e[7],g=e[8],M=e[9],O=e[10],w=e[11],x=i*i*h+c,E=o*i*h+a*l,k=a*i*h-o*l,S=i*o*h-a*l,P=o*o*h+c,C=a*o*h+i*l,A=i*a*h+o*l,I=o*a*h-i*l,j=a*a*h+c,t[0]=f*x+_*E+g*k,t[1]=d*x+y*E+M*k,t[2]=p*x+b*E+O*k,t[3]=v*x+m*E+w*k,t[4]=f*S+_*P+g*C,t[5]=d*S+y*P+M*C,t[6]=p*S+b*P+O*C,t[7]=v*S+m*P+w*C,t[8]=f*A+_*I+g*j,t[9]=d*A+y*I+M*j,t[10]=p*A+b*I+O*j,t[11]=v*A+m*I+w*j,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},e.rotateX=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*n,t[5]=a*i+c*n,t[6]=s*i+h*n,t[7]=u*i+f*n,t[8]=l*i-o*n,t[9]=c*i-a*n,t[10]=h*i-s*n,t[11]=f*i-u*n,t},e.rotateY=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],l=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-l*n,t[1]=a*i-c*n,t[2]=s*i-h*n,t[3]=u*i-f*n,t[8]=o*n+l*i,t[9]=a*n+c*i,t[10]=s*n+h*i,t[11]=u*n+f*i,t},e.rotateZ=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*n,t[1]=a*i+c*n,t[2]=s*i+h*n,t[3]=u*i+f*n,t[4]=l*i-o*n,t[5]=c*i-a*n,t[6]=h*i-s*n,t[7]=f*i-u*n,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,r){var n=r[0],i=r[1],o=r[2],a=Math.sqrt(n*n+i*i+o*o),u=void 0,l=void 0,c=void 0;return a<s.EPSILON?null:(n*=a=1/a,i*=a,o*=a,u=Math.sin(e),l=Math.cos(e),c=1-l,t[0]=n*n*c+l,t[1]=i*n*c+o*u,t[2]=o*n*c-i*u,t[3]=0,t[4]=n*i*c-o*u,t[5]=i*i*c+l,t[6]=o*i*c+n*u,t[7]=0,t[8]=n*o*c+i*u,t[9]=i*o*c-n*u,t[10]=o*o*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=o,e.fromQuat2=function(t,e){var r=new s.ARRAY_TYPE(3),n=-e[0],i=-e[1],a=-e[2],u=e[3],l=e[4],c=e[5],h=e[6],f=e[7],d=n*n+i*i+a*a+u*u;return d>0?(r[0]=2*(l*u+f*n+c*a-h*i)/d,r[1]=2*(c*u+f*i+h*n-l*a)/d,r[2]=2*(h*u+f*a+l*i-c*n)/d):(r[0]=2*(l*u+f*n+c*a-h*i),r[1]=2*(c*u+f*i+h*n-l*a),r[2]=2*(h*u+f*a+l*i-c*n)),o(t,e,r),t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],l=e[9],c=e[10];return t[0]=Math.sqrt(r*r+n*n+i*i),t[1]=Math.sqrt(o*o+a*a+s*s),t[2]=Math.sqrt(u*u+l*l+c*c),t},e.getRotation=function(t,e){var r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t},e.fromRotationTranslationScale=function(t,e,r,n){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,l=o+o,c=a+a,h=i*u,f=i*l,d=i*c,p=o*l,v=o*c,_=a*c,y=s*u,b=s*l,m=s*c,g=n[0],M=n[1],O=n[2];return t[0]=(1-(p+_))*g,t[1]=(f+m)*g,t[2]=(d-b)*g,t[3]=0,t[4]=(f-m)*M,t[5]=(1-(h+_))*M,t[6]=(v+y)*M,t[7]=0,t[8]=(d+b)*O,t[9]=(v-y)*O,t[10]=(1-(h+p))*O,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,r,n,i){var o=e[0],a=e[1],s=e[2],u=e[3],l=o+o,c=a+a,h=s+s,f=o*l,d=o*c,p=o*h,v=a*c,_=a*h,y=s*h,b=u*l,m=u*c,g=u*h,M=n[0],O=n[1],w=n[2],x=i[0],E=i[1],k=i[2],S=(1-(v+y))*M,P=(d+g)*M,C=(p-m)*M,A=(d-g)*O,I=(1-(f+y))*O,j=(_+b)*O,D=(p+m)*w,T=(_-b)*w,F=(1-(f+v))*w;return t[0]=S,t[1]=P,t[2]=C,t[3]=0,t[4]=A,t[5]=I,t[6]=j,t[7]=0,t[8]=D,t[9]=T,t[10]=F,t[11]=0,t[12]=r[0]+x-(S*x+A*E+D*k),t[13]=r[1]+E-(P*x+I*E+T*k),t[14]=r[2]+k-(C*x+j*E+F*k),t[15]=1,t},e.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,s=n+n,u=i+i,l=r*a,c=n*a,h=n*s,f=i*a,d=i*s,p=i*u,v=o*a,_=o*s,y=o*u;return t[0]=1-h-p,t[1]=c+y,t[2]=f-_,t[3]=0,t[4]=c-y,t[5]=1-l-p,t[6]=d+v,t[7]=0,t[8]=f+_,t[9]=d-v,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,r,n,i,o,a){var s=1/(r-e),u=1/(i-n),l=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(i+n)*u,t[10]=(a+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*l,t[15]=0,t},e.perspective=function(t,e,r,n,i){var o=1/Math.tan(e/2),a=void 0;return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(n-i),t[10]=(i+n)*a,t[14]=2*i*n*a):(t[10]=-1,t[14]=-2*n),t},e.perspectiveFromFieldOfView=function(t,e,r,n){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),l=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*l*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},e.ortho=function(t,e,r,n,i,o,a){var s=1/(e-r),u=1/(n-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(a+o)*l,t[15]=1,t},e.lookAt=function(t,e,r,i){var o=void 0,a=void 0,u=void 0,l=void 0,c=void 0,h=void 0,f=void 0,d=void 0,p=void 0,v=void 0,_=e[0],y=e[1],b=e[2],m=i[0],g=i[1],M=i[2],O=r[0],w=r[1],x=r[2];return Math.abs(_-O)<s.EPSILON&&Math.abs(y-w)<s.EPSILON&&Math.abs(b-x)<s.EPSILON?n(t):(f=_-O,d=y-w,p=b-x,v=1/Math.sqrt(f*f+d*d+p*p),o=g*(p*=v)-M*(d*=v),a=M*(f*=v)-m*p,u=m*d-g*f,(v=Math.sqrt(o*o+a*a+u*u))?(o*=v=1/v,a*=v,u*=v):(o=0,a=0,u=0),l=d*u-p*a,c=p*o-f*u,h=f*a-d*o,(v=Math.sqrt(l*l+c*c+h*h))?(l*=v=1/v,c*=v,h*=v):(l=0,c=0,h=0),t[0]=o,t[1]=l,t[2]=f,t[3]=0,t[4]=a,t[5]=c,t[6]=d,t[7]=0,t[8]=u,t[9]=h,t[10]=p,t[11]=0,t[12]=-(o*_+a*y+u*b),t[13]=-(l*_+c*y+h*b),t[14]=-(f*_+d*y+p*b),t[15]=1,t)},e.targetTo=function(t,e,r,n){var i=e[0],o=e[1],a=e[2],s=n[0],u=n[1],l=n[2],c=i-r[0],h=o-r[1],f=a-r[2],d=c*c+h*h+f*f;d>0&&(d=1/Math.sqrt(d),c*=d,h*=d,f*=d);var p=u*f-l*h,v=l*c-s*f,_=s*h-u*c;return(d=p*p+v*v+_*_)>0&&(d=1/Math.sqrt(d),p*=d,v*=d,_*=d),t[0]=p,t[1]=v,t[2]=_,t[3]=0,t[4]=h*_-f*v,t[5]=f*p-c*_,t[6]=c*v-h*p,t[7]=0,t[8]=c,t[9]=h,t[10]=f,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},e.subtract=a,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=t[9],d=t[10],p=t[11],v=t[12],_=t[13],y=t[14],b=t[15],m=e[0],g=e[1],M=e[2],O=e[3],w=e[4],x=e[5],E=e[6],k=e[7],S=e[8],P=e[9],C=e[10],A=e[11],I=e[12],j=e[13],D=e[14],T=e[15];return Math.abs(r-m)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(n-g)<=s.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(i-M)<=s.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(o-O)<=s.EPSILON*Math.max(1,Math.abs(o),Math.abs(O))&&Math.abs(a-w)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(u-x)<=s.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(l-E)<=s.EPSILON*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(c-k)<=s.EPSILON*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(h-S)<=s.EPSILON*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(f-P)<=s.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(d-C)<=s.EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-A)<=s.EPSILON*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(v-I)<=s.EPSILON*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(_-j)<=s.EPSILON*Math.max(1,Math.abs(_),Math.abs(j))&&Math.abs(y-D)<=s.EPSILON*Math.max(1,Math.abs(y),Math.abs(D))&&Math.abs(b-T)<=s.EPSILON*Math.max(1,Math.abs(b),Math.abs(T))};var s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.mul=i,e.sub=a},function(t,e,r){"use strict";function n(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=r[0],d=r[1],p=r[2],v=r[3],_=r[4],y=r[5],b=r[6],m=r[7],g=r[8];return t[0]=f*n+d*a+p*l,t[1]=f*i+d*s+p*c,t[2]=f*o+d*u+p*h,t[3]=v*n+_*a+y*l,t[4]=v*i+_*s+y*c,t[5]=v*o+_*u+y*h,t[6]=b*n+m*a+g*l,t[7]=b*i+m*s+g*c,t[8]=b*o+m*u+g*h,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new o.ARRAY_TYPE(9);return o.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){
var e=new o.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,r,n,i,a,s,u,l){var c=new o.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=r,c[3]=n,c[4]=i,c[5]=a,c[6]=s,c[7]=u,c[8]=l,c},e.set=function(t,e,r,n,i,o,a,s,u,l){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=l,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=c*a-s*l,f=-c*o+s*u,d=l*o-a*u,p=r*h+n*f+i*d;return p?(p=1/p,t[0]=h*p,t[1]=(-c*n+i*l)*p,t[2]=(s*n-i*a)*p,t[3]=f*p,t[4]=(c*r-i*u)*p,t[5]=(-s*r+i*o)*p,t[6]=d*p,t[7]=(-l*r+n*u)*p,t[8]=(a*r-n*o)*p,t):null},e.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8];return t[0]=a*c-s*l,t[1]=i*l-n*c,t[2]=n*s-i*a,t[3]=s*u-o*c,t[4]=r*c-i*u,t[5]=i*o-r*s,t[6]=o*l-a*u,t[7]=n*u-r*l,t[8]=r*a-n*o,t},e.determinant=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8];return e*(l*o-a*u)+r*(-l*i+a*s)+n*(u*i-o*s)},e.multiply=n,e.translate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=r[0],d=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=f*n+d*a+l,t[7]=f*i+d*s+c,t[8]=f*o+d*u+h,t},e.rotate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=Math.sin(r),d=Math.cos(r);return t[0]=d*n+f*a,t[1]=d*i+f*s,t[2]=d*o+f*u,t[3]=d*a-f*n,t[4]=d*s-f*i,t[5]=d*u-f*o,t[6]=l,t[7]=c,t[8]=h,t},e.scale=function(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,s=n+n,u=i+i,l=r*a,c=n*a,h=n*s,f=i*a,d=i*s,p=i*u,v=o*a,_=o*s,y=o*u;return t[0]=1-h-p,t[3]=c-y,t[6]=f+_,t[1]=c+y,t[4]=1-l-p,t[7]=d-v,t[2]=f-_,t[5]=d+v,t[8]=1-l-h,t},e.normalFromMat4=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],v=e[13],_=e[14],y=e[15],b=r*s-n*a,m=r*u-i*a,g=r*l-o*a,M=n*u-i*s,O=n*l-o*s,w=i*l-o*u,x=c*v-h*p,E=c*_-f*p,k=c*y-d*p,S=h*_-f*v,P=h*y-d*v,C=f*y-d*_,A=b*C-m*P+g*S+M*k-O*E+w*x;return A?(A=1/A,t[0]=(s*C-u*P+l*S)*A,t[1]=(u*k-a*C-l*E)*A,t[2]=(a*P-s*k+l*x)*A,t[3]=(i*P-n*C-o*S)*A,t[4]=(r*C-i*k+o*E)*A,t[5]=(n*k-r*P-o*x)*A,t[6]=(v*w-_*O+y*M)*A,t[7]=(_*g-p*w-y*m)*A,t[8]=(p*O-v*g+y*b)*A,t):null},e.projection=function(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t},e.subtract=i,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=e[0],d=e[1],p=e[2],v=e[3],_=e[4],y=e[5],b=e[6],m=e[7],g=e[8];return Math.abs(r-f)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-d)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-p)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-v)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(s-_)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(u-y)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(l-b)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(c-m)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(h-g)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(g))};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.mul=n,e.sub=i},function(t,e,r){"use strict";function n(){var t=new h.ARRAY_TYPE(2);return h.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function o(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function a(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function s(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function u(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function l(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function c(t){var e=t[0],r=t[1];return e*e+r*r}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=n,e.clone=function(t){var e=new h.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){var r=new h.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,r){return t[0]=e,t[1]=r,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},e.subtract=i,e.multiply=o,e.divide=a,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},e.distance=s,e.squaredDistance=u,e.length=l,e.squaredLength=c,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},e.lerp=function(t,e,r,n){var i=e[0],o=e[1];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t},e.random=function(t,e){e=e||1;var r=2*h.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},e.transformMat2=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t},e.transformMat2d=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t},e.transformMat3=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t},e.transformMat4=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t},e.rotate=function(t,e,r,n){var i=e[0]-r[0],o=e[1]-r[1],a=Math.sin(n),s=Math.cos(n);return t[0]=i*s-o*a+r[0],t[1]=i*a+o*s+r[1],t},e.angle=function(t,e){var r=t[0],n=t[1],i=e[0],o=e[1],a=r*r+n*n;a>0&&(a=1/Math.sqrt(a));var s=i*i+o*o;s>0&&(s=1/Math.sqrt(s));var u=(r*i+n*o)*a*s;return u>1?0:u<-1?Math.PI:Math.acos(u)},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){var r=t[0],n=t[1],i=e[0],o=e[1];return Math.abs(r-i)<=h.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))};var h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.len=l,e.sub=i,e.mul=o,e.div=a,e.dist=s,e.sqrDist=u,e.sqrLen=c,e.forEach=function(){var t=n();return function(e,r,n,i,o,a){var s=void 0,u=void 0;for(r||(r=2),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}()},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e,r){var n=.5*r[0],i=.5*r[1],o=.5*r[2],a=e[0],s=e[1],u=e[2],l=e[3];return t[0]=a,t[1]=s,t[2]=u,t[3]=l,t[4]=n*l+i*u-o*s,t[5]=i*l+o*a-n*u,t[6]=o*l+n*s-i*a,t[7]=-n*a-i*s-o*u,t}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function a(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=r[4],u=r[5],l=r[6],c=r[7],h=e[4],f=e[5],d=e[6],p=e[7],v=r[0],_=r[1],y=r[2],b=r[3];return t[0]=n*b+a*v+i*y-o*_,t[1]=i*b+a*_+o*v-n*y,t[2]=o*b+a*y+n*_-i*v,t[3]=a*b-n*v-i*_-o*y,t[4]=n*c+a*s+i*l-o*u+h*b+p*v+f*y-d*_,t[5]=i*c+a*u+o*s-n*l+f*b+p*_+d*v-h*y,t[6]=o*c+a*l+n*u-i*s+d*b+p*y+h*_-f*v,t[7]=a*c-n*s-i*u-o*l+p*b-h*v-f*_-d*y,t}Object.defineProperty(e,"__esModule",{value:!0}),e.sqrLen=e.squaredLength=e.len=e.length=e.dot=e.mul=e.setReal=e.getReal=void 0,e.create=function(){var t=new s.ARRAY_TYPE(8);return s.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},e.clone=function(t){var e=new s.ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},e.fromValues=function(t,e,r,n,i,o,a,u){var l=new s.ARRAY_TYPE(8);return l[0]=t,l[1]=e,l[2]=r,l[3]=n,l[4]=i,l[5]=o,l[6]=a,l[7]=u,l},e.fromRotationTranslationValues=function(t,e,r,n,i,o,a){var u=new s.ARRAY_TYPE(8);u[0]=t,u[1]=e,u[2]=r,u[3]=n;var l=.5*i,c=.5*o,h=.5*a;return u[4]=l*n+c*r-h*e,u[5]=c*n+h*t-l*r,u[6]=h*n+l*e-c*t,u[7]=-l*t-c*e-h*r,u},e.fromRotationTranslation=i,e.fromTranslation=function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},e.fromRotation=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},e.fromMat4=function(t,e){var r=u.create();l.getRotation(r,e);var n=new s.ARRAY_TYPE(3);return l.getTranslation(n,e),i(t,r,n),t},e.copy=o,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},e.set=function(t,e,r,n,i,o,a,s,u){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t},e.getDual=function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},e.setDual=function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},e.getTranslation=function(t,e){var r=e[4],n=e[5],i=e[6],o=e[7],a=-e[0],s=-e[1],u=-e[2],l=e[3];return t[0]=2*(r*l+o*a+n*u-i*s),t[1]=2*(n*l+o*s+i*a-r*u),t[2]=2*(i*l+o*u+r*s-n*a),t},e.translate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=.5*r[0],u=.5*r[1],l=.5*r[2],c=e[4],h=e[5],f=e[6],d=e[7];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=a*s+i*l-o*u+c,t[5]=a*u+o*s-n*l+h,t[6]=a*l+n*u-i*s+f,t[7]=-n*s-i*u-o*l+d,t},e.rotateX=function(t,e,r){var n=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],l=e[5],c=e[6],h=e[7],f=s*a+h*n+l*o-c*i,d=l*a+h*i+c*n-s*o,p=c*a+h*o+s*i-l*n,v=h*a-s*n-l*i-c*o;return u.rotateX(t,e,r),n=t[0],i=t[1],o=t[2],a=t[3],t[4]=f*a+v*n+d*o-p*i,t[5]=d*a+v*i+p*n-f*o,t[6]=p*a+v*o+f*i-d*n,t[7]=v*a-f*n-d*i-p*o,t},e.rotateY=function(t,e,r){var n=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],l=e[5],c=e[6],h=e[7],f=s*a+h*n+l*o-c*i,d=l*a+h*i+c*n-s*o,p=c*a+h*o+s*i-l*n,v=h*a-s*n-l*i-c*o;return u.rotateY(t,e,r),n=t[0],i=t[1],o=t[2],a=t[3],t[4]=f*a+v*n+d*o-p*i,t[5]=d*a+v*i+p*n-f*o,t[6]=p*a+v*o+f*i-d*n,t[7]=v*a-f*n-d*i-p*o,t},e.rotateZ=function(t,e,r){var n=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],l=e[5],c=e[6],h=e[7],f=s*a+h*n+l*o-c*i,d=l*a+h*i+c*n-s*o,p=c*a+h*o+s*i-l*n,v=h*a-s*n-l*i-c*o;return u.rotateZ(t,e,r),n=t[0],i=t[1],o=t[2],a=t[3],t[4]=f*a+v*n+d*o-p*i,t[5]=d*a+v*i+p*n-f*o,t[6]=p*a+v*o+f*i-d*n,t[7]=v*a-f*n-d*i-p*o,t},e.rotateByQuatAppend=function(t,e,r){var n=r[0],i=r[1],o=r[2],a=r[3],s=e[0],u=e[1],l=e[2],c=e[3];return t[0]=s*a+c*n+u*o-l*i,t[1]=u*a+c*i+l*n-s*o,t[2]=l*a+c*o+s*i-u*n,t[3]=c*a-s*n-u*i-l*o,s=e[4],u=e[5],l=e[6],c=e[7],t[4]=s*a+c*n+u*o-l*i,t[5]=u*a+c*i+l*n-s*o,t[6]=l*a+c*o+s*i-u*n,t[7]=c*a-s*n-u*i-l*o,t},e.rotateByQuatPrepend=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=r[0],u=r[1],l=r[2],c=r[3];return t[0]=n*c+a*s+i*l-o*u,t[1]=i*c+a*u+o*s-n*l,t[2]=o*c+a*l+n*u-i*s,t[3]=a*c-n*s-i*u-o*l,s=r[4],u=r[5],l=r[6],c=r[7],t[4]=n*c+a*s+i*l-o*u,t[5]=i*c+a*u+o*s-n*l,t[6]=o*c+a*l+n*u-i*s,t[7]=a*c-n*s-i*u-o*l,t},e.rotateAroundAxis=function(t,e,r,n){if(Math.abs(n)<s.EPSILON)return o(t,e);var i=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);n*=.5;var a=Math.sin(n),u=a*r[0]/i,l=a*r[1]/i,c=a*r[2]/i,h=Math.cos(n),f=e[0],d=e[1],p=e[2],v=e[3];t[0]=f*h+v*u+d*c-p*l,t[1]=d*h+v*l+p*u-f*c,t[2]=p*h+v*c+f*l-d*u,t[3]=v*h-f*u-d*l-p*c;var _=e[4],y=e[5],b=e[6],m=e[7];return t[4]=_*h+m*u+y*c-b*l,t[5]=y*h+m*l+b*u-_*c,t[6]=b*h+m*c+_*l-y*u,t[7]=m*h-_*u-y*l-b*c,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t},e.multiply=a,e.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t},e.lerp=function(t,e,r,n){var i=1-n;return c(e,r)<0&&(n=-n),t[0]=e[0]*i+r[0]*n,t[1]=e[1]*i+r[1]*n,t[2]=e[2]*i+r[2]*n,t[3]=e[3]*i+r[3]*n,t[4]=e[4]*i+r[4]*n,t[5]=e[5]*i+r[5]*n,t[6]=e[6]*i+r[6]*n,t[7]=e[7]*i+r[7]*n,t},e.invert=function(t,e){var r=f(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},e.normalize=function(t,e){var r=f(e);if(r>0){r=Math.sqrt(r);var n=e[0]/r,i=e[1]/r,o=e[2]/r,a=e[3]/r,s=e[4],u=e[5],l=e[6],c=e[7],h=n*s+i*u+o*l+a*c;t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=(s-n*h)/r,t[5]=(u-i*h)/r,t[6]=(l-o*h)/r,t[7]=(c-a*h)/r}return t},e.str=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},e.equals=function(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],l=t[6],c=t[7],h=e[0],f=e[1],d=e[2],p=e[3],v=e[4],_=e[5],y=e[6],b=e[7];return Math.abs(r-h)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(n-f)<=s.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-d)<=s.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-p)<=s.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-v)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(u-_)<=s.EPSILON*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(l-y)<=s.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(c-b)<=s.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))};var s=n(r(0)),u=n(r(3)),l=n(r(4));e.getReal=u.copy,e.setReal=u.copy,e.mul=a;var c=e.dot=u.dot,h=e.length=u.length,f=(e.len=h,e.squaredLength=u.squaredLength);e.sqrLen=f},function(t,e,r){"use strict";function n(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=r[0],c=r[1],h=r[2],f=r[3],d=r[4],p=r[5];return t[0]=n*l+o*c,t[1]=i*l+a*c,t[2]=n*h+o*f,t[3]=i*h+a*f,t[4]=n*d+o*p+s,t[5]=i*d+a*p+u,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new o.ARRAY_TYPE(6);return o.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},e.clone=function(t){var e=new o.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,e,r,n,i,a){var s=new o.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=r,s[3]=n,s[4]=i,s[5]=a,s},e.set=function(t,e,r,n,i,o,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t},e.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=r*o-n*i;return u?(u=1/u,t[0]=o*u,t[1]=-n*u,t[2]=-i*u,t[3]=r*u,t[4]=(i*s-o*a)*u,t[5]=(n*a-r*s)*u,t):null},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=n,e.rotate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=Math.sin(r),c=Math.cos(r);return t[0]=n*c+o*l,t[1]=i*c+a*l,t[2]=n*-l+o*c,t[3]=i*-l+a*c,t[4]=s,t[5]=u,t},e.scale=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=r[0],c=r[1];return t[0]=n*l,t[1]=i*l,t[2]=o*c,t[3]=a*c,t[4]=s,t[5]=u,t},e.translate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=r[0],c=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=n*l+o*c+s,t[5]=i*l+a*c+u,t},e.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t},e.subtract=i,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},e.equals=function(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=e[0],c=e[1],h=e[2],f=e[3],d=e[4],p=e[5];return Math.abs(r-l)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-c)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-h)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-f)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(s-d)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(u-p)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.mul=n,e.sub=i},function(t,e,r){"use strict";function n(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=r[0],u=r[1],l=r[2],c=r[3];return t[0]=n*s+o*u,t[1]=i*s+a*u,t[2]=n*l+o*c,t[3]=i*l+a*c,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new o.ARRAY_TYPE(4);return o.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},e.clone=function(t){var e=new o.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,e,r,n){var i=new o.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i},e.set=function(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t},e.transpose=function(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},e.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*o-i*n;return a?(a=1/a,t[0]=o*a,t[1]=-n*a,t[2]=-i*a,t[3]=r*a,t):null},e.adjoint=function(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=n,e.rotate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+o*s,t[1]=i*u+a*s,t[2]=n*-s+o*u,t[3]=i*-s+a*u,t},e.scale=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=r[0],u=r[1];return t[0]=n*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t},e.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},e.subtract=i,e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],s=e[0],u=e[1],l=e[2],c=e[3];return Math.abs(r-s)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-u)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-l)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-c)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(0));e.mul=n,e.sub=i},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.vec4=e.vec3=e.vec2=e.quat2=e.quat=e.mat4=e.mat3=e.mat2d=e.mat2=e.glMatrix=void 0;var i=n(r(0)),o=n(r(9)),a=n(r(8)),s=n(r(5)),u=n(r(4)),l=n(r(3)),c=n(r(7)),h=n(r(6)),f=n(r(2)),d=n(r(1));e.glMatrix=i,e.mat2=o,e.mat2d=a,e.mat3=s,e.mat4=u,e.quat=l,e.quat2=c,e.vec2=h,e.vec3=f,e.vec4=d}])})},function(t,e,r){"use strict";function n(t,e,r,n,i){return t[I]="number"==typeof e?e:1/0,t[j]="number"==typeof r?r:1/0,t[D]="number"==typeof n?n:-(1/0),t[T]="number"==typeof i?i:-(1/0),t}function i(t,e,r,i){var o=new A.glMatrix.ARRAY_TYPE(F.BOX_SIDES);return n(o,t,e,r,i)}function o(t){var e=new A.glMatrix.ARRAY_TYPE(F.BOX_SIDES);return e[I]=t[I],e[j]=t[j],e[D]=t[D],e[T]=t[T],e}function a(t,e){return t[I]=e[I],t[j]=e[j],t[D]=e[D],t[T]=e[T],t}function s(t){return t[I]=1/0,t[j]=1/0,t[D]=-(1/0),t[T]=-(1/0),t}function u(t){return t[I]=-(1/0),t[j]=-(1/0),t[D]=1/0,t[T]=1/0,t}function l(t,e){return e[0]<0?(t[I]=-e[0],t[D]=0):(t[I]=0,t[D]=e[0]),e[1]<0?(t[j]=-e[1],t[T]=0):(t[j]=0,t[T]=e[1]),t}function c(t,e,r){for(var n=0;n<2;n+=1)r[n]<0?(t[n]=e[n]-r[n],t[n+2]=e[n]):(t[n]=e[n],t[n+2]=e[n]+r[n]);return t}function h(t,e,r){for(var n=0;n<2;n+=1)r[n]<0?(t[n]=e[n]+r[n],t[n+2]=e[n]-r[n]):(t[n]=e[n]-r[n],t[n+2]=e[n]+r[n]);return t}function f(t){return t[I]>t[D]||t[j]>t[T]}function d(t){return!(isFinite(t[I])&&isFinite(t[j])&&isFinite(t[D])&&isFinite(t[T]))}function p(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],l=e[3];return Math.abs(r-a)<=A.glMatrix.EPSILON&&Math.abs(n-s)<=A.glMatrix.EPSILON&&Math.abs(i-u)<=A.glMatrix.EPSILON&&Math.abs(o-l)<=A.glMatrix.EPSILON}function v(t,e){return A.vec2.set(t,e[D]-e[I],e[T]-e[j])}function _(t,e){return v(t,e),A.vec2.scale(t,t,.5)}function y(t,e){return _(t,e),t[I]+=e[I],t[j]+=e[j],t}function b(t,e,r){t[I]=e[I]-r[0],t[D]=e[D]+r[0],t[j]=e[j]-r[1],t[T]=e[T]+r[1]}function m(t){return(t[D]-t[I])*(t[T]-t[j])}function g(t,e,r){return i(Math.min(e[I],r[I]),Math.min(e[j],r[j]),Math.max(e[D],r[D]),Math.max(e[T],r[T]))}function M(t,e,r){var n=t;t===e&&(n=i());for(var o=I,u=D;o<=j&&!(e[u]<r[o]||e[o]>r[u]);o+=1,u+=1)n[o]=Math.max(e[o],r[o]),n[u]=Math.min(e[u],r[u]);return o!==j+1&&s(n),t===e&&a(t,n),t}function O(t,e){return!(t[D]<=e[I]||t[I]>=e[D]||t[T]<=e[j]||t[j]>=e[T])}function w(t,e){return!(e[I]<t[I]||e[D]>t[D]||e[j]<t[j]||e[T]>t[T])}function x(t,e){return e[I]>=t[I]&&e[I]<=t[D]&&e[j]>=t[j]&&e[j]<=t[T]}function E(t,e,r){return t!==e&&a(t,e),f(e)?(t[I]=r[I],t[D]=r[I],t[j]=r[j],t[T]=r[j]):(r[I]<t[I]?t[I]=r[I]:r[I]>t[D]&&(t[D]=r[I]),r[j]<t[j]?t[j]=r[j]:r[j]>t[T]&&(t[T]=r[j])),t}function k(t,e,r){t[I]=e[I]+r[0],t[j]=e[j]+r[1],t[D]=e[D]+r[0],t[T]=e[T]+r[1]}function S(t,e,r,n){var o=t;t===e&&(o=i()),s(o);var u=A.vec2.set(A.vec2.create(),e[I],e[j]),l=A.vec2.create();return n(l,u,r),E(o,o,l),u[I]=e[D],n(l,u,r),E(o,o,l),u[j]=e[T],n(l,u,r),E(o,o,l),u[I]=e[I],n(l,u,r),E(o,o,l),t===e&&a(t,o),t}function P(t,e,r){return S(t,e,r,A.vec2.transformMat2)}function C(t,e,r){return S(t,e,r,A.vec2.transformMat2d)}Object.defineProperty(e,"__esModule",{value:!0}),e.MAXY=e.MAXX=e.MINY=e.MINX=void 0,e.set=n,e.create=i,e.clone=o,e.copy=a,e.initEmpty=s,e.initInfinity=u,e.initSizeFromOrigin=l,e.initSizeFromLocation=c,e.initCenterExtents=h,e.isEmpty=f,e.isInfinite=d,e.equals=p,e.getSize=v,e.getExtents=_,e.getCenter=y,e.expand=b,e.area=m,e.hull=g,e.intersection=M,e.overlaps=O,e.contains=w,e.containsPt=x,e.encapsulatePt=E,e.translate=k,e.transformMat2=P,e.transformMat2d=C;var A=r(1),I=e.MINX=0,j=e.MINY=1,D=e.MAXX=2,T=e.MAXY=3,F={BOX_SIDES:4}},function(t,e,r){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[m]=e,t[g]=r,t}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new b.glMatrix.ARRAY_TYPE(2);return n(r,t,e)}function o(t){var e=new b.glMatrix.ARRAY_TYPE(2);return e[m]=t[m],e[g]=t[g],e}function a(t,e){return t[m]=e[m],t[g]=e[g],t}function s(t,e){return i(t,e)}function u(t,e,r){return b.vec2.add(t,e,r)}function l(t,e,r){return b.vec2.sub(t,e,r)}function c(t,e,r){return b.vec2.transformMat2(t,e,r)}function h(t,e,r){return b.vec2.transformMat2d(t,e,r)}function f(t){return"point2d("+t[0]+" , "+t[1]+")"}function d(t,e){return b.vec2.distance(t,e)}function p(t,e){return b.vec2.squaredDistance(t,e)}function v(t,e,r,n){return b.vec2.lerp(t,e,r,n)}function _(t,e){return b.vec2.equals(t,e)}function y(t,e){return b.vec2.exactEquals(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.sqrDist=e.dist=void 0,e.set=n,e.create=i,e.clone=o,e.copy=a,e.initFromValues=s,e.addVec2=u,e.sub=l,e.transformMat2=c,e.transformMat2d=h,e.str=f,e.distance=d,e.squaredDistance=p,e.lerp=v,e.equals=_,e.exactEquals=y;var b=r(1),m=0,g=1;e.dist=d,e.sqrDist=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1);n.mat2d.svd=function(t,e,r,n){if(t&&(t[0]=n[4],t[1]=n[5]),e||r){var i=(n[0]+n[3])/2,o=(n[0]-n[3])/2,a=(n[1]+n[2])/2,s=(n[1]-n[2])/2;if(e){var u=Math.sqrt(i*i+s*s),l=Math.sqrt(o*o+a*a);e[0]=u+l,e[1]=u-l}if(r){var c=Math.atan2(a,o),h=Math.atan2(s,i);r[0]=(h-c)/2,r[1]=(h+c)/2}}},e.default=n.mat2d},function(t,e){"use strict";function r(t,e,r){return t<e?e:t>r?r:t}function n(t){return t<0?0:t>1?1:t}function i(t,e,r){return t*(1-r)+e*r}Object.defineProperty(e,"__esModule",{value:!0});var o=1e-5,a=.25,s=.5,u=2;Math.QUATER_PI=a*Math.PI,Math.HALF_PI=s*Math.PI,Math.HALF_NPI=-s*Math.PI,Math.TWO_PI=u*Math.PI,Math.NPI=-Math.PI,Math.NQUATER_PI=a*Math.NPI,Math.NHALF_PI=s*Math.NPI,Math.NTWO_PI=u*Math.NPI,Math.INV_PI=1/Math.PI,Math.RAD_TO_DEG=180/Math.PI,Math.DEG_TO_RAD=Math.PI/180,Math.EPS=o,Math.clamp=r,Math.clamp01=n,Math.lerp=i,e.default=Math},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=r(2),c=i(l),h=r(17),f=n(h),d=r(18),p=n(d),v=r(11),_=n(v),y=r(7),b=n(y),m=r(8),g=n(m),M=r(12),O=n(M),w=r(1),x=function(t){function e(t){o(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,["changed:xform","changed:style","changed:order","changed:visibility","changed:geom"]));return r._aabox=c.create(),r._zIndex=t&&t.zIndex?t.zIndex:0,r._visible=!0,r._geomDirty=!1,r._fullXform=w.mat2d.create(),r}return s(e,t),u(e,[{key:"zIndex",set:function(t){if(!Number.isInteger(t))throw new Error("zIndex must be an integer");if(t!==this._zIndex){var e=this._zIndex;this._zIndex=t,this.fire("changed:order",{attr:"zIndex",prevVal:e,currVal:this._zIndex})}return this},get:function(){return this._zIndex}},{key:"aabox",get:function(){return this._updateAABox(),this._aabox}},{key:"visible",set:function(t){if("boolean"!=typeof t)throw new Error("visible must be a boolean");return t!==this._visible&&(this._visible=t,this.fire("changed:visibility",{attr:"visible",prevVal:!this._visible,currVal:this._visible})),this},get:function(){return this._visible}}]),e}(O.default),E=function(t){function e(t){o(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r._stateStack=[],r}return s(e,t),u(e,[{key:"save",value:function(){var t=new g.default;return g.default.copyBasicStyle(this,t),t.zIndex=this.zIndex,this._stateStack.push(t),this}},{key:"restore",value:function(){var t=this._stateStack.pop();return t&&(g.default.copyBasicStyle(t,this),this.zIndex=t.zIndex),this}},{key:"getGlobalDimensions",value:function(){var t=[0,0];return w.mat2d.svd(null,t,null,this.globalXform),t[0]*=this.width,t[1]*=this.height,t}},{key:"containsPoint",value:function(t,e,r,n){var i=!1,o=this.aabox;return this.visible&&c.containsPt(o,e)&&(n.save(),n.setTransform(this._fullXform[0],this._fullXform[1],this._fullXform[2],this._fullXform[3],this._fullXform[4],this._fullXform[5]),n.beginPath(),this._draw(n),n.strokeStyle="rgba(0,0,0,0)",n.lineWidth=this.strokeWidth+5,n.dashPattern=[],n.setTransform(1,0,0,1,0,0),n.stroke(),(this.isFillVisible()&&n.isPointInPath(t[0],t[1])||this.isStrokeVisible()&&n.isPointInStroke(t[0],t[1]))&&(i=!0),n.restore()),i}},{key:"renderBounds",value:function(t,e,r){t.save(),t.setTransform(e[0],e[1],e[2],e[3],e[4],e[5]),r.setStrokeCtx(t);var n=[0,0],i=[0,0],o=this.aabox;c.getCenter(n,o),c.getExtents(i,o),t.beginPath(),t.rect(n[0]-i[0],n[1]-i[1],2*i[0],2*i[1]),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()}},{key:"_localXformUpdated",value:function(){this._boundsOutOfDate=!0}},{key:"_globalXformUpdated",value:function(){this._boundsOutOfDate=!0}},{key:"render",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.transformCtx(t,this._fullXform,e),t.beginPath();var o=this._draw(t);(o||"undefined"==typeof o)&&(this.isFillVisible()&&(null===n||Boolean(n))&&(r.setFillStyle(t,this),t.fill()),this.isStrokeVisible()&&(null===i||Boolean(i))&&(r.setStrokeStyle(t,this),
t.setTransform(1,0,0,1,0,0),t.stroke()))}},{key:"setStyle",value:function(t){return g.default.copyBasicStyle(t,this),this}},{key:"toJSON",value:function(){var t=this;return this._stateStack&&this._stateStack.length&&(t=this._stateStack[0]),Object.assign({visible:this.visible,zIndex:t.zIndex},g.default.toJSON(t),_.default.toJSON(this))}},{key:"visible",get:function(){return this._visible&&(this.isFillVisible()||this.isStrokeVisible())}}],[{key:"shapeCompare",value:function(t,e){var r=t.zIndex,n=e.zIndex;if(r<n)return-1;if(r>n)return 1;var i=f.default.compareFillStyle(t,e);return i||(i=p.default.compareStrokeStyle(t,e)),i}}]),e}((0,b.default)(x,(0,v.createEventedTransform2dMixin)("changed:xform"),(0,h.createEventedFillStyleMixin)("changed:style"),(0,d.createEventedStrokeStyleMixin)("changed:style")));e.default=E},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){for(var e=arguments.length,o=Array(e>1?e-1:0),a=1;a<e;a++)o[a-1]=arguments[a];var s=t?function(t){function e(){for(var t,i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];r(this,e);var u=n(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a)));return o.forEach(function(t){if("function"==typeof t.prototype.initializer){var e;(e=t.prototype.initializer).call.apply(e,[u].concat(a))}}),u}return i(e,t),e}(t):function(){},u=function(e,r){Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r)).forEach(function(n){n.match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length)$/)||t&&n.match(/^(?:initializer)$/)||Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})};return o.forEach(function(t){u(s.prototype,t.prototype),u(s,t)}),s};e.default=o},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(7),l=n(u),c=r(17),h=n(c),f=r(18),d=n(f),p=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,null,[{key:"copyBasicStyle",value:function(t,e){h.default.copyFillStyle(t,e),d.default.copyStrokeStyle(t,e)}},{key:"toJSON",value:function(t){return Object.assign(h.default.toJSON(t),d.default.toJSON(t))}}]),e}((0,l.default)(function t(){i(this,t)},h.default,d.default));e.default=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1);n.vec2.cross2d=function(t,e){return t[0]*e[1]-t[1]*e[0]},n.vec2.angleFast=function(t,e){return Math.acos(n.vec2.dot(t,e))},n.vec2.angle=function(t,e){var r=n.vec2.dot(t,e),i=n.vec2.cross2d(t,e),o=Math.atan2(i,r);return o},n.vec2.anglePosX=function(t){var e=Math.atan2(t[1],t[0]);return e<0&&(e*=-1),e},e.default=n.vec2},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e,r,n){p.isEmpty(t)?(t[0]=e[0],t[2]=e[0],n[0]=n[2]=r,t[1]=e[1],t[3]=e[1],n[1]=n[3]=r):(e[0]<t[0]?(t[0]=e[0],n[0]=r):e[0]>t[2]&&(t[2]=e[0],n[2]=r),e[1]<t[1]?(t[1]=e[1],n[1]=r):e[1]>t[3]&&(t[3]=e[1],n[3]=r))}function l(t,e,r){var n=e[0]*r[1]-r[0]*e[1];return t[0]+=(e[0]+r[0])*n,t[1]+=(e[1]+r[1])*n,n}function c(t){return Array.isArray(t)||ArrayBuffer&&ArrayBuffer.isView(t)}Object.defineProperty(e,"__esModule",{value:!0});var h=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},d=r(2),p=i(d),v=r(3),_=i(v),y=r(6),b=n(y),m=r(1),g=r(5),M=n(g),O=r(14),w=m.mat2d.create(),x=function(t){function e(t){o(this,e);var r=t.verts||[],n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));if(!c(r)||0===r.length||c(r[0])&&r.length<1||!c(r[0])&&(r.length<2||r.length%2!==0))throw new Error("PolyLine shapes must be initialized with an array of 2d points and contain at least 1 points");n._extentIndices=[-1,-1,-1,-1],n._localaabox=p.create(),n._verts=[],n._centroid=[0,0],p.initEmpty(n._aabox);var i=0,s=0;if(c(r[0])){for(s=0;s<r.length-1;s+=1)n._verts.push(_.clone(r[s])),u(n._aabox,r[s],s,n._extentIndices),i+=l(n._centroid,r[s],r[s+1]);n._verts.push(_.clone(r[s])),u(n._aabox,r[s],s,n._extentIndices),i+=l(n._centroid,r[s],r[0])}else{n._verts.push(_.create(r[0],r[1])),u(n._aabox,n._verts[0],0,n._extentIndices);var h=1;for(s=2;s<r.length-2;s+=2,h+=1)n._verts.push(_.create(r[s],r[s+1])),u(n._aabox,n._verts[h],h,n._extentIndices),i+=l(n._centroid,n._verts[h-1],n._verts[h]);n._verts.push(_.create(r[s],r[s+1])),u(n._aabox,n._verts[h],h,n._extentIndices),i+=l(n._centroid,n._verts[h],n._verts[0])}i*=.5,n._centroid[0]/=6*i,n._centroid[1]/=6*i;var f=_.create();return p.getCenter(f,n._aabox),n.pivot=f,n._verts.length<3?n._convexHull=n._verts.map(function(t,e){return e}):n._convexHull=(0,O.simpleHull_2D)(n._verts),n}return s(e,t),h(e,[{key:"getDimensions",value:function(){return[this.width,this.height]}},{key:"_collapseVerts",value:function(){var t=this;_.set(this._pivot,0,0);var e=this.localXform;if(m.mat2d.equals(e,w))return!1;p.initEmpty(this._aabox);for(var r=0;r<this._verts.length;r+=1)_.transformMat2d(this._verts[r],this._verts[r],e);return this._verts.length<3?this._convexHull=this._verts.map(function(t,e){return e}):this._convexHull=(0,O.simpleHull_2D)(this._verts),this._convexHull.forEach(function(e){u(t._aabox,t._verts[e],e,t._extentIndices)}),this.setTransformations(0,0,1,1,0),!0}},{key:"translateVert",value:function(t,e){if(t>=this._verts.length)throw new Error("Cannot translate vertex at index "+t+". There are only "+this._verts.length+" vertices in the polygon.");if(e[0]||e[1]){var r=_.clone(this._verts[t]),n=_.clone(this._verts[t]);_.addVec2(n,n,e),this._collapseVerts(),this._resetAABox=!0,this._geomDirty=!0,_.copy(n),this.fire("changed:geom",{attr:"verts["+t+"]",prevVal:r,currVal:n})}return this}},{key:"setVertPosition",value:function(t,e){if(t>=this._verts.length)throw new Error("Cannot translate vertex at index "+t+". There are only "+this._verts.length+" vertices in the polygon.");if(!_.equals(e,this._verts[t])){var r=_.clone(this._verts[t]);this._collapseVerts(),_.copy(this._verts[t],e),this._resetAABox=!0,this._geomDirty=!0,this.fire("changed:geom",{attr:"verts["+t+"]",prevVal:r,currVal:e})}}},{key:"insertVert",value:function(t,e){var r=M.default.min(M.default.max(t,0),this._verts.length);return this._collapseVerts(),t>=this._verts.length?(this._verts.push(_.clone(e)),r=this._verts.length-1):this._verts.splice(t,0,_.clone(e)),this._resetAABox=!0,this._geomDirty=!0,this.fire("changed:geom:addvert",{attr:"verts["+r+"]",currVal:e}),r}},{key:"appendVert",value:function(t){return this.insertVert(this._verts.length,t)}},{key:"removeVert",value:function(t){if(t>=this._verts.length||t<0)throw new Error("Cannot remove vertex "+t+". Invalid index. There are only "+this._verts.length+" vertices in the shape.");var e=this._verts[t];return this._verts.splice(t,1),this._collapseVerts(),this._resetAABox=!0,this._geomDirty=!0,this.fire("changed:geom:removevert",{attr:"verts["+t+"]",currVal:e}),t}},{key:"_rebuildAABox",value:function(){var t=this;p.initEmpty(this._aabox),this._verts.length<3?this._convexHull=this._verts.map(function(t,e){return e}):this._convexHull=(0,O.simpleHull_2D)(this._verts),this._convexHull.forEach(function(e){u(t._aabox,t._verts[e],e,t._extentIndices)});var e=_.create(0,0);p.getCenter(e,this._aabox),this.pivot=e}},{key:"_updateAABox",value:function(){var t=this;if(this._resetAABox&&(this._rebuildAABox(),this._resetAABox=!1),this._boundsOutOfDate||this._geomDirty){p.initEmpty(this._aabox);var e=[0,0],r=this.globalXform;if(this._convexHull.forEach(function(n){p.encapsulatePt(t._aabox,t._aabox,_.transformMat2d(e,t._verts[n],r))}),this._boundsOutOfDate=!1,this._geomDirty){var n=_.create();n[0]=this._verts[this._extentIndices[0]][0]+.5*(this._verts[this._extentIndices[2]][0]-this._verts[this._extentIndices[0]][0]),n[1]=this._verts[this._extentIndices[1]][1]+.5*(this._verts[this._extentIndices[3]][1]-this._verts[this._extentIndices[1]][1]),this.pivot=n,this._geomDirty=!1}}}},{key:"_draw",value:function(t){var e=!1;if(this._verts.length>=2){t.moveTo(this._verts[0][0],this._verts[0][1]);for(var r=1;r<this._verts.length;r+=1)t.lineTo(this._verts[r][0],this._verts[r][1]);e=!0}return e}},{key:"toJSON",value:function(){return Object.assign({type:"PolyLine",verts:this.vertsRef.map(function(t){return[t[0],t[1]]})},f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"toJSON",this).call(this))}},{key:"width",get:function(){return this._updateAABox(),!this._verts.length||this._extentIndices[0]<0||this._extentIndices[2]<0?0:this._verts[this._extentIndices[2]][0]-this._verts[this._extentIndices[0]][0]}},{key:"height",get:function(){return this._updateAABox(),!this._verts.length||this._extentIndices[0]<0||this._extentIndices[2]<0?0:this._verts[this._extentIndices[3]][1]-this._verts[this._extentIndices[1]][1]}},{key:"vertsRef",get:function(){return this._verts}},{key:"numVerts",get:function(){return this._verts.length}}]),e}(b.default);e.default=x,x.aaboxEncapsulatePt=u},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e,r,n,i){return f.mat2d.identity(t),f.mat2d.translate(t,t,[n[0]+i[0],n[1]+i[1]]),f.mat2d.rotate(t,t,_.default.DEG_TO_RAD*e),f.mat2d.scale(t,t,r),f.mat2d.translate(t,t,[-i[0],-i[1]]),t}function s(t){t.forEach(function(t){t._xformDirty=!0,s(t._children)})}function u(t){return(0,p.default)(null,y,function(){function e(){o(this,e)}return l(e,[{key:"setPosition",value:function(e){if(!h.equals(e,this._pos)){var r=[this._pos[0],this._pos[1]];h.copy(this._pos,e),this._lxformDirty=!0,s(this._children),this.fire(t,{attr:"position",prevVal:r,currVal:e})}return this}},{key:"translate",value:function(e){if(e[0]||e[1]){var r=[this._pos[0],this._pos[1]];h.addVec2(this._pos,this._pos,e),this._lxformDirty=!0,s(this._children),this.fire(t,{attr:"position",prevVal:r,currVal:[this._pos[0],this._pos[1]]})}return this}},{key:"setScale",value:function(e){if(!f.vec2.equals(e,this._scale)){var r=[this._scale[0],this._scale[1]];f.vec2.copy(this._scale,e),this._lxformDirty=!0,s(this._children),this.fire(t,{attr:"size",prevVal:r,currVal:e})}return this}},{key:"scale",value:function(e){if(1!==e[0]||1!==e[1]){var r=[this._scale[0],this._scale[1]];f.vec2.multiply(this._scale,this._scale,e),this._lxformDirty=!0,s(this._children),this.fire(t,{attr:"size",prevVal:r,currVal:[this._scale[0],this._scale[1]]})}return this}},{key:"setRotation",value:function(e){var r=e%360;if(r!==this._rotDeg){var n=this._rotDeg;this._rotDeg=r,this._lxformDirty=!0,s(this._children),this.fire(t,{attr:"orientation",prevVal:n,curral:this._rotDeg})}}},{key:"rotate",value:function(e){if(e){var r=this._rotDeg;this._rotDeg+=e,this._rotDeg%=360,this._lxformDirty=!0,s(this._children),this.fire(t,{attr:"orientation",prevVal:r,curral:this._rotDeg})}return this}},{key:"setTransformations",value:function(e,r,n,i,o){var a=[],u=[],l=[];if(!("undefined"==typeof e||"undefined"==typeof r||f.glMatrix.equals(e,this._pos[0])&&f.glMatrix.equals(r,this._pos[1]))){var c=h.clone(this._pos);this._pos[0]=e,this._pos[1]=r,a.push("position"),u.push(c),l.push(h.clone(this._pos))}if(!("undefined"==typeof n||"undefined"==typeof i||f.glMatrix.equals(n,this._scale[0])&&f.glMatrix.equals(i,this._scale[1]))){var d=f.vec2.clone(this._scale);f.vec2.set(this._scale,n,i),a.push("size"),u.push(d),l.push(f.vec2.clone(this._scale))}if("undefined"!=typeof o){var p=o%360;if(!f.glMatrix.equals(p,this._rotDeg)){var v=this._rotDeg;this._rotDeg=p,a.push("orientation"),u.push(v),l.push(this._rotDeg)}}return a.length&&(this._lxformDirty=!0,s(this._children),this.fire(t,{attrs:a,prevVals:u,currVals:l})),this}},{key:"pivot",set:function(e){if(!h.equals(e,this._pivot)){var r=[this._pivot[0],this._pivot[1]];h.copy(this._pivot,e),this._lxformDirty=!0,s(this._children),this.fire(t,{attr:"pivot",prevVal:r,currVal:e})}return this},get:function(){return h.clone(this._pivot)}}]),e}())}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();e.buildXformMatrix=a,e.createEventedTransform2dMixin=u;var c=r(3),h=i(c),f=r(1),d=r(7),p=n(d),v=r(5),_=n(v),y=function(){function t(e){o(this,t),this.initializer(e)}return l(t,[{key:"_initTransformFromOptions",value:function(t){t&&("undefined"!=typeof t.position&&this.setPosition(t.position),"undefined"!=typeof t.scale&&this.setScale(t.scale),"undefined"!=typeof t.rotation&&this.setRotation(t.rotation),"undefined"!=typeof t.pivot&&(this.pivot=t.pivot))}},{key:"initializer",value:function(t){this._localXform=f.mat2d.create(),this._lxformDirty=!1,this._pivot=h.create(0,0),this._pos=h.create(0,0),this._scale=f.vec2.fromValues(1,1),this._rotDeg=0,this._globalXform=f.mat2d.create(),this._xformDirty=!1,this._parent=null,this._children=new Set,this._initTransformFromOptions(t)}},{key:"addChildXform",value:function(t){this._children.has(t)||(this._children.add(t),t._parent&&t._parent.removeChild(t),t._parent=this,t._xformDirty=!0,s(t._children))}},{key:"removeChildXform",value:function(t){this._children.delete(t)}},{key:"unparentXform",value:function(){this._parent&&(this._parent.removeChild(this),this._parent=null,f.mat2d.copy(this._globalXform,this.localXform))}},{key:"getPosition",value:function(){return f.vec2.clone(this._pos)}},{key:"getPositionRef",value:function(){return this._pos}},{key:"getWorldPosition",value:function(){var t=this.globalXform;return h.create(t[4],t[5])}},{key:"setPosition",value:function(t){h.copy(this._pos,t),this._lxformDirty=!0,s(this._children)}},{key:"translate",value:function(t){return(t[0]||t[1])&&(h.addVec2(this._pos,this._pos,t),this._lxformDirty=!0,s(this._children)),this}},{key:"getScale",value:function(){return f.vec2.clone(this._scale)}},{key:"getScaleRef",value:function(){return this._scale}},{key:"setScale",value:function(t){return f.vec2.copy(this._scale,t),this._lxformDirty=!0,s(this._children),this}},{key:"scale",value:function(t){return 1===t[0]&&1===t[1]||(f.vec2.multiply(this._scale,this._scale,t),this._lxformDirty=!0,s(this._children)),this}},{key:"getRotation",value:function(){return this._rotDeg}},{key:"setRotation",value:function(t){return this._rotDeg=t,this._lxformDirty=!0,s(this._children),this}},{key:"rotate",value:function(t){return t&&(this._rotDeg+=t,this._lxformDirty=!0,s(this._children)),this}},{key:"_dirtyChildren",value:function(){s(this._children)}},{key:"_updatelocalxform",value:function(){this._lxformDirty&&(a(this._localXform,this._rotDeg,this._scale,this._pos,this._pivot),this._localXformUpdated&&this._localXformUpdated(),this._lxformDirty=!1)}},{key:"_updateglobalxform",value:function(){(this._lxformDirty||this._xformDirty)&&(this._updatelocalxform(),this._parent?f.mat2d.multiply(this._globalXform,this._parent.globalXform,this._localXform):f.mat2d.copy(this._globalXform,this._localXform),this._globalXformUpdated&&this._globalXformUpdated(),this._xformDirty=!1)}},{key:"transformCtx",value:function(t,e,r){f.mat2d.multiply(e,r,this.globalXform),t.setTransform(e[0],e[1],e[2],e[3],e[4],e[5])}},{key:"pivot",set:function(t){return h.copy(this._pivot,t),this._lxformDirty=!0,s(this._children),this},get:function(){return h.clone(this._pivot)}},{key:"pivotRef",get:function(){return this._pivot}},{key:"parent",get:function(){return this._parent}},{key:"localXform",get:function(){return this._updatelocalxform(),this._localXform}},{key:"globalXform",get:function(){return this._updateglobalxform(),this._globalXform}}],[{key:"toJSON",value:function(t){var e=t.getPositionRef(),r=t.getScaleRef(),n=t.pivotRef;return{position:[e[0],e[1]],scale:[r[0],r[1]],rotation:t.getRotation(),pivot:[n[0],n[1]]}}}]),t}();e.default=y},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e,r,i){var o=this;if(r>=e.length)return 0;var a=0,s=null;return s=t.get(e[r]),s&&(a=n(s[0],e,r+1,i),s[1].forEach(function(t){return t.call(o,i)}),a+=s[1].length),a}function i(t,e){var r=-1,n=t[0],o=t[1];o.length&&e.forEach(function(t){(r=o.indexOf(t))>=0&&o.splice(r,1)}),n.forEach(function(t){i(t,e)})}function o(t){var e=t;if("string"==typeof t)e=[t];else if(!Array.isArray(t))throw new Error("Input must be an array of strings");return e}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function(){function t(e){r(this,t),this.initializer(e)}return a(t,[{key:"initializer",value:function(t){this._listeners=new Map,this.registerEvents(t)}},{key:"registerEvents",value:function(t){var e=this;if(t){var r=o(t);if("string"==typeof t)r=[t];else if(!Array.isArray(t))throw new Error("Events must be an array of strings");r.forEach(function(t){for(var r=t.split(":"),n=e._listeners,i=0;i<r.length;i+=1){var o=n.get(r[i]);o||(o=[new Map,[]],n.set(r[i],o)),n=o[0]}})}}},{key:"on",value:function(t,e){var r=this,n=o(t);return n.forEach(function(t){var n=t.split(":"),i=r._listeners,o=null;n.forEach(function(e){if(o=i.get(e),!o){var r=[];throw i.forEach(function(t,e){return r.push(e)}),new Error(t+" is not a valid event type. The registered event types at this level are ["+r+"]")}i=o[0]}),o[1].indexOf(e)<0&&o[1].push(e)}),this}},{key:"off",value:function(t,e){var r=this,n=o(t),a=e;return Array.isArray(a)||(a=[e]),n.forEach(function(t){var e=t.split(":"),n=r._listeners,o=null,s=0;for(s=0;s<e.length&&(o=n.get(e[s]),o);s+=1)n=o[0];o&&i(o,a)}),this}},{key:"once",value:function(t,e){var r=this,n=function n(i){r.off(t,n),e.call(r,i)};return this.on(t,n),this}},{key:"fire",value:function(t,e){var r=t.split(":"),i={type:t,target:this};return Object.assign(i,e),n(this._listeners,r,0,i),this._eventParent&&(i={},Object.getOwnPropertyNames(e).forEach(function(t){i[t]=e[t]}),this._eventParent.fire(t,i)),this}},{key:"listens",value:function(t){for(var e=t.split(":"),r=this._listeners,n=null,i=0;i<e.length&&(n=r.get(e[i]),n);i+=1)r=n[0];return n||this._eventParent&&this._eventParent.listens(t)}},{key:"setEventedParent",value:function(t,e){return this._eventParent=t,this._eventParentData=e,this}}]),t}();e.default=s},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){t&&(" "+t.className+" ").indexOf(" "+e+" ")<0&&(t.className+=(t.className?" ":"")+e)}function l(t){var e=document.createElement("div");u(e,"mapd-draw-canvas-container");var r=document.createElement("canvas"),n=r.getContext("2d"),i=p.makeCanvasAutoHighDPI(n);return u(r,"mapd-draw-canvas"),r.style.position="absolute",r.style.pointerEvents="none",e.appendChild(r),t.appendChild(e),{canvasContainer:e,canvas:r,canvasContext:n,ratio:i}}function c(t,e,r,n,i){t.forEach(function(t){e.set(t,{shapeObj:t,shapeId:r.shapeId,shapeIdx:-1}),t.on(["changed:order","changed:visibility","changed:style"],n),t.on(["changed:geom","changed:visibility","changed:xform"],i),r.shapeId+=1})}function h(t,e,r,n){var i=[];return t.forEach(function(t){var o=e.get(t);o&&i.push(o.shapeIdx),e.delete(t),t.off(["changed"],[r,n])}),i}Object.defineProperty(e,"__esModule",{value:!0}),e.EventConstants=void 0;var f=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),d=r(26),p=i(d),v=r(3),_=i(v),y=r(6),b=n(y),m=r(8),g=n(m),M=r(27),O=r(28),w=n(O),x=r(12),E=n(x),k=r(29),S=n(k),P=["mousedown","mouseup","mousemove","click","dblclick","mouseover","mouseout","touchstart","touchend","touchmove"],C=["top","bottom","left","right"],A=e.EventConstants={MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEMOVE:"mousemove",CLICK:"click",DBLCLICK:"dblclick",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",SHAPE_ADD:"shape:add",SHAPE_DELETE:"shape:delete",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove"},I=function(t){function e(){var t;o(this,e);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=a(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(n)));return s._defaults={packedFillColor:s.packedFillColor,packedStrokeColor:s.packedStrokeColor,strokeWidth:s.strokeWidth,lineJoin:s.lineJoin,lineCap:s.lineCap,dashPattern:s.dashPattern,dashOffset:s.dashOffset},s}return s(e,t),f(e,[{key:"setFillStyle",value:function(t,e){e.packedFillColor!==this.packedFillColor&&(this.packedFillColor=e.packedFillColor,t.fillStyle=this.fillColor)}},{key:"setStrokeStyle",value:function(t,e){e.packedStrokeColor!==this.packedStrokeColor&&(this.packedStrokeColor=e.packedStrokeColor,t.strokeStyle=this.strokeColor),e.strokeWidth!==this._strokeWidth&&(this.strokeWidth=e.strokeWidth,t.lineWidth=this._strokeWidth),e.lineJoin!==this._lineJoin&&(this.lineJoin=e.lineJoin,t.lineJoin=this._lineJoin),e.lineCap!==this._lineCap&&(this.lineCap=e.lineCap,t.lineCap=this._lineCap);var r=e._dashPattern,n=!1;if(r.length===this._dashPattern.length){for(var i=0;i<r.length;i+=1)if(r[i]!==this._dashPattern[i]){n=!0;break}}else n=!0;n&&(this.dashPattern=r,t.setLineDash(this._dashPattern)),e.dashOffset!==this._dashOffset&&(this.dashOffset=e.dashOffset,t.lineDashOffset=this._dashOffset)}},{key:"applyDefaults",value:function(t){var e=this;Object.getOwnPropertyNames(this._defaults).forEach(function(t){e[t]=e._defaults[t]}),this.setFillCtx(t),this.setStrokeCtx(t)}}]),e}(g.default),j=function(t){function e(t,r){o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._init(t,r),n}return s(e,t),f(e,[{key:"destroy",value:function(){var t=this;this._destroyCanvas(),this._objects&&(this._objects.forEach(function(e,r){r.off("changed",[t._reorderCb,t._redrawCb])}),this._objects.clear(),this._sortedObjs=[],this._reorderedObjIdxs.clear())}},{key:"_resize",value:function(t){var e=0;this._parent.offsetWidth&&(e=Math.max(e,this._parent.offsetWidth-this._margins.left-this._margins.right));var r=0;if(this._parent.offsetHeight&&(r=Math.max(r,this._parent.offsetHeight-this._margins.top-this._margins.bottom)),this._drawCanvas.width=e*this._pixelRatio,this._drawCanvas.height=r*this._pixelRatio,this._drawCanvas.style.left=this._margins.left+"px",this._drawCanvas.style.top=this._margins.top+"px",this._drawCanvas.style.width=e+"px",this._drawCanvas.style.height=r+"px",this._camera);else{var n=t&&t.projectionDimensions?t.projectionDimensions:[e,r];this._camera=new w.default([0,0,e,r],n,!!t.flipY&&Boolean(t.flipY)),this._camera.setPosition(t&&t.cameraPosition?t.cameraPosition:[e/2,r/2]),this._camera.on("changed",this._rerenderCb)}this._rerenderCb()}},{key:"_mousedownCB",value:function(t){t.target===this._parent&&this.fire("mousedown",{originalEvent:t})}},{key:"_touchstartCB",value:function(t){t.target===this._parent&&this.fire("touchstart",{originalEvent:t})}},{key:"_mouseupCB",value:function(t){t.target===this._parent&&this.fire("mouseup",{originalEvent:t})}},{key:"_touchendCB",value:function(t){t.target===this._parent&&this.fire("touchend",{originalEvent:t})}},{key:"_mousemoveCB",value:function(t){t.target===this._parent&&this.fire("mousemove",{originalEvent:t})}},{key:"_touchmoveCB",value:function(t){t.target===this._parent&&this.fire("touchmove",{originalEvent:t})}},{key:"_clickCB",value:function(t){t.target===this._parent&&this.fire("click",{originalEvent:t})}},{key:"_dblclickCB",value:function(t){t.target===this._parent&&this.fire("dblclick",{originalEvent:t})}},{key:"_mouseoverCB",value:function(t){t.target===this._parent&&this.fire("mouseover",{originalEvent:t})}},{key:"_mouseoutCB",value:function(t){t.target===this._parent&&this.fire("mouseout",{originalEvent:t})}},{key:"_enableEvents",value:function(){this.registerEvents(P);for(var t=P.map(function(t){return"_"+t+"CB"}),e=0;e<P.length;e+=1)document.addEventListener(P[e],this[t[e]],!0)}},{key:"_disableEvents",value:function(){for(var t=P.map(function(t){return"_"+t+"CB"}),e=0;e<P.length;e+=1)document.removeEventListener(P[e],this[t[e]],!0)}},{key:"_initCanvas",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._margins=e&&e.margins?Object.assign({},e.margins):{},C.forEach(function(t){"number"!=typeof r._margins[t]&&(r._margins[t]=0)});var i=l(t),o=i.canvasContainer,a=i.canvas,s=i.canvasContext,u=i.ratio;this._container=o,this._drawCanvas=a,this._drawCtx=s,this._pixelRatio=u,this._parent=t,(0,M.bindAll)(["_resize"],this),this._resize(e),this._resizeSensor=new S.default(t,this._resize),(n||null===n&&e&&e.enableEvents)&&this._enableEvents()}},{key:"_destroyCanvas",value:function(){this._drawCanvas&&this._disableEvents(),this._parent&&(this._parent.removeChild(this._drawCanvas),this._resizeSensor&&this._resizeSensor.detach(this._parent,this._resize)),this._drawCanvas=null,this._drawCtx=null,this._parent=null}},{key:"_init",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.registerEvents([A.SHAPE_ADD,A.SHAPE_DELETE]),(0,M.bindAll)(["_reorderCb","_rerenderCb"],this),(0,M.bindAll)(["_mousedownCB","_mouseupCB","_mousemoveCB","_clickCB","_dblclickCB","_mouseoverCB","_mouseoutCB","_touchstartCB","_touchendCB","_touchmoveCB"],this),this._renderFrameCb=this.renderAll.bind(this),this._renderRequestId=0,this._ids={shapeId:1},this._objects=new Map,this._sortedObjs=[],this._reorderedObjIdxs=new Set,this._initCanvas(t,e,r),this._styleState=new I({fillColor:"red"})}},{key:"getContainer",value:function(){return this._parent}},{key:"getCanvasContainer",value:function(){return this._container}},{key:"getCanvas",value:function(){return this._drawCanvas}},{key:"project",value:function(t,e){var r=this._camera.screenToWorldMatrix;return _.transformMat2d(t,e,r)}},{key:"unproject",value:function(t,e){var r=this._camera.worldToScreenMatrix;return _.transformMat2d(t,e,r)}},{key:"hasShape",value:function(t){return this._objects.has(t)}},{key:"addShape",value:function(t){var e=t;Array.isArray(e)||(e=[t]),c(e,this._objects,this._ids,this._reorderCb,this._rerenderCb),this.fire("shape:add",{shape:e});var r={target:e};return this._reorderCb(r),this}},{key:"deleteShape",value:function(t){var e=t;Array.isArray(e)||(e=[t]);for(var r=h(e,this._objects,this._reorderCb,this._rerenderCb),n=-1,i=0;i<e.length;i+=1)(n=this._sortedObjs.indexOf(e[i]))>=0&&this._sortedObjs.splice(n,1),this._reorderedObjIdxs.add(r[i]);return this._rerenderCb(),this.fire("shape:delete",{shape:e}),this}},{key:"deleteAllShapes",value:function(){return this.deleteShape(this.sortedShapes.slice()),this}},{key:"moveShapeToTop",value:function(t){if(this._objects.has(t)){var e=this.sortedShapes,r=e[e.length-1].zIndex;t.zIndex=r+1}}},{key:"moveShapeToBack",value:function(t){if(this._objects.has(t)){var e=this.sortedShapes,r=e[0].zIndex;t.zIndex=r}}},{key:"getShapesAsJSON",value:function(){var t=this.sortedShapes;return t.map(function(t){return t.toJSON()})}},{key:"_rerenderCb",value:function(){this._renderRequestId&&window.cancelAnimationFrame(this._renderRequestId),this._renderRequestId=window.requestAnimationFrame(this._renderFrameCb)}},{key:"_reorderCb",value:function(t){var e=this,r=t.target;Array.isArray(r)||(r=[t.target]),r.forEach(function(t){console.assert(t,"A changed event doesn't have an object");var r=e._objects.get(t);console.assert(r,"A changed event target isn't in the list of shapes "+t),r.shapeIdx<0&&(r.shapeIdx=e._sortedObjs.push(t)-1),e._reorderedObjIdxs.add(r.shapeIdx)}),this._rerenderCb()}},{key:"_renderShapes",value:function(t,e,r){var n=this,i=r.worldToScreenMatrix;e.forEach(function(e){e.visible&&e.render(t,i,n._styleState)})}},{key:"renderAll",value:function(){var t=this._drawCtx;if(t.clearRect(0,0,this._drawCanvas.offsetWidth,this._drawCanvas.offsetHeight),this._objects.size){t.save();var e=this.sortedShapes;this._styleState.applyDefaults(t),this._renderShapes(t,e,this._camera),t.restore()}}},{key:"sortedShapes",get:function(){return this._reorderedObjIdxs.size&&(console.assert(this._sortedObjs.length===this._objects.size,"Size mismatch when rendering objets. Something got out of sync - sorted objs length: "+this._sortedObjs.length+", objects length: "+this._objects.size),this._sortedObjs.sort(b.default.shapeCompare),this._reorderedObjIdxs.clear()),this._sortedObjs}},{key:"margins",get:function(){var t=this,e={};
return C.forEach(function(r){e[r]=t._margins[r]}),e},set:function(t){var e=this;C.forEach(function(r){"number"==typeof t[r]&&t[r]!==e._margins[r]&&(e._margins[r]=t.prop)}),this._resize()}},{key:"viewport",get:function(){return this._camera.viewport},set:function(t){this._camera.viewport=t}},{key:"projectionDimensions",get:function(){return this._camera.projectionDimensions},set:function(t){return this._camera.projectionDimensions=t,this}},{key:"cameraPosition",get:function(){return this._camera.getPosition()},set:function(t){return this._camera.setPosition(t),this}}]),e}(E.default);e.default=j,j.EventConstants=A},function(t,e){"use strict";function r(t,e,r){return(e[i]-t[i])*(r[o]-t[o])-(r[i]-t[i])*(e[o]-t[o])}function n(t){var e=[],n=t.length;if(n<3){for(var i=0;i<n;i+=1)e[i]=i;return e}var o=new Array(2*n+1);o.fill(-1);var a=n-2,s=a+3;o[a]=o[s]=2,r(t[0],t[1],t[2])>0?(o[a+1]=0,o[a+2]=1):(o[a+1]=1,o[a+2]=0);for(var u=3;u<n;u+=1)if(r(t[o[a]],t[o[a+1]],t[u])<=0||r(t[o[s-1]],t[o[s]],t[u])<=0){for(;o[a]>=0&&o[a+1]>=0&&r(t[o[a]],t[o[a+1]],t[u])<=0;)a+=1;for(a-=1,o[a]=u;o[s]>=0&&o[s+1]>=0&&r(t[o[s-1]],t[o[s]],t[u])<=0;)s-=1;s+=1,o[s]=u}var l=0;for(l=0;l<=s-a-1;l+=1)e[l]=o[a+l];return o[a+l]!==e[0]&&(e[l]=o[a+l]),e}Object.defineProperty(e,"__esModule",{value:!0}),e.simpleHull_2D=n;var i=0,o=1},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},c=r(2),h=i(c),f=r(6),d=n(f),p=function(t){function e(t){o(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r._width=0,r._height=0,"undefined"!=typeof t.width&&(r.width=t.width),"undefined"!=typeof t.height&&(r.height=t.height),r}return s(e,t),u(e,[{key:"getDimensions",value:function(){return[this._width,this._height]}},{key:"_updateAABox",value:function(){(this._geomDirty||this._boundsOutOfDate)&&(h.initCenterExtents(this._aabox,[0,0],[this._width/2,this._height/2]),h.transformMat2d(this._aabox,this._aabox,this.globalXform),this._geomDirty=this._boundsOutOfDate=!1)}},{key:"_draw",value:function(t){t.rect(0-this.width/2,0-this.height/2,this.width,this.height)}},{key:"toJSON",value:function(){return Object.assign({type:"Rect",width:this.width,height:this.height},l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"toJSON",this).call(this))}},{key:"width",set:function(t){if("number"!=typeof t)throw new Error("Width must be a number");if(t!==this._width){var e=this._width;this._width=t,this._geomDirty=!0,this.fire("changed:geom",{attr:"width",prevVal:e,currVal:this._width})}return this},get:function(){return this._width}},{key:"height",set:function(t){if("number"!=typeof t)throw new Error("Height must be a number");if(t!==this._height){var e=this._height;this._height=t,this._geomDirty=!0,this.fire("changed:geom",{attr:"height",prevVal:e,currVal:this._height})}return this},get:function(){return this._height}}]),e}(d.default);e.default=p},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t){return(255&t)/255}function u(t){return v.default.floor(255*v.default.clamp01(t))}function l(t){return"rgba("+(t>>>24)+", "+((16711680&t)>>16)+", "+((65280&t)>>8)+", "+s(t)+")"}function c(t){if("string"!=typeof t)throw new Error(t+" is not a valid color string");var e=0,r=null;if(r=t.match(y))e=255,e|=v.default.clamp(Number.parseInt(r[3],10),0,255)<<8,e|=v.default.clamp(Number.parseInt(r[2],10),0,255)<<16,e|=v.default.clamp(Number.parseInt(r[1],10),0,255)<<24;else if(r=t.match(b))e=u(Number.parseFloat(r[4],10)),e|=v.default.clamp(Number.parseInt(r[3],10),0,255)<<8,e|=v.default.clamp(Number.parseInt(r[2],10),0,255)<<16,e|=v.default.clamp(Number.parseInt(r[1],10),0,255)<<24;else if(r=t.match(m))e=255,e|=v.default.clamp(Number.parseInt(r[3],16),0,255)<<8,e|=v.default.clamp(Number.parseInt(r[2],16),0,255)<<16,e|=v.default.clamp(Number.parseInt(r[1],16),0,255)<<24;else{if(!_.has(t))throw new Error(t+" is not a valid color string");r=_.get(t).match(m),e=255,e|=v.default.clamp(Number.parseInt(r[3],16),0,255)<<8,e|=v.default.clamp(Number.parseInt(r[2],16),0,255)<<16,e|=v.default.clamp(Number.parseInt(r[1],16),0,255)<<24}return e}function h(t,e){return function(r){function n(){return a(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,r),d(n,[{key:"initializer",value:function(t,e){this._eventHandler=e,f(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"initializer",this).call(this,t)}},{key:"_checkPackedColorChanged",value:function(r){if(r!==this._color){var n=this._color,i=s(n),o=s(r);this._color=r,this._eventHandler.fire(t,{attr:e,prevVal:l(n),currVal:l(this._color)}),o!==i&&this._eventHandler.fire(t,{attr:"opacity",prevVal:i,currVal:o})}}},{key:"value",set:function(t){var e=c(t);return this._checkPackedColorChanged(e),this},get:function(){return l(this._color)}},{key:"packedValue",set:function(t){var e=0;return e|=t,this._checkPackedColorChanged(e),this},get:function(){return this._color}},{key:"opacity",set:function(e){if("number"!=typeof e)throw new Error("Opacity must be a number between 0-1");var r=255&this._color,n=u(e);return n!==r&&(this._color&=4294967040,this._color|=n,this._eventHandler.fire(t,{attr:"opacity",prevVal:r/255,currVal:n/255})),this},get:function(){return s(this._color)}}]),n}(g)}Object.defineProperty(e,"__esModule",{value:!0});var f=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},d=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();e.createEventedColorRGBAClass=h;var p=r(5),v=n(p),_=new Map([["aliceblue","#F0F8FF"],["antiquewhite","#FAEBD7"],["aqua","#00FFFF"],["aquamarine","#7FFFD4"],["azure","#F0FFFF"],["beige","#F5F5DC"],["bisque","#FFE4C4"],["black","#000000"],["blanchedalmond","#FFEBCD"],["blue","#0000FF"],["blueviolet","#8A2BE2"],["brown","#A52A2A"],["burlywood","#DEB887"],["cadetblue","#5F9EA0"],["chartreuse","#7FFF00"],["chocolate","#D2691E"],["coral","#FF7F50"],["cornflowerblue","#6495ED"],["cornsilk","#FFF8DC"],["crimson","#DC143C"],["cyan","#00FFFF"],["darkblue","#00008B"],["darkcyan","#008B8B"],["darkgoldenrod","#B8860B"],["darkgray","#A9A9A9"],["darkgreen","#006400"],["darkkhaki","#BDB76B"],["darkmagenta","#8B008B"],["darkolivegreen","#556B2F"],["darkorange","#FF8C00"],["darkorchid","#9932CC"],["darkred","#8B0000"],["darksalmon","#E9967A"],["darkseagreen","#8FBC8F"],["darkslateblue","#483D8B"],["darkslategray","#2F4F4F"],["darkturquoise","#00CED1"],["darkviolet","#9400D3"],["deeppink","#FF1493"],["deepskyblue","#00BFFF"],["dimgray","#696969"],["dodgerblue","#1E90FF"],["firebrick","#B22222"],["floralwhite","#FFFAF0"],["forestgreen","#228B22"],["fuchsia","#FF00FF"],["gainsboro","#DCDCDC"],["ghostwhite","#F8F8FF"],["gold","#FFD700"],["goldenrod","#DAA520"],["gray","#808080"],["green","#008000"],["greenyellow","#ADFF2F"],["honeydew","#F0FFF0"],["hotpink","#FF69B4"],["indianred","#CD5C5C"],["indigo","#4B0082"],["ivory","#FFFFF0"],["khaki","#F0E68C"],["lavender","#E6E6FA"],["lavenderblush","#FFF0F5"],["lawngreen","#7CFC00"],["lemonchiffon","#FFFACD"],["lightblue","#ADD8E6"],["lightcoral","#F08080"],["lightcyan","#E0FFFF"],["lightgoldenrodyellow","#FAFAD2"],["lightgray","#D3D3D3"],["lightgreen","#90EE90"],["lightpink","#FFB6C1"],["lightsalmon","#FFA07A"],["lightseagreen","#20B2AA"],["lightskyblue","#87CEFA"],["lightslategray","#778899"],["lightsteelblue","#B0C4DE"],["lightyellow","#FFFFE0"],["lime","#00FF00"],["limegreen","#32CD32"],["linen","#FAF0E6"],["magenta","#FF00FF"],["maroon","#800000"],["mediumaquamarine","#66CDAA"],["mediumblue","#0000CD"],["mediumorchid","#BA55D3"],["mediumpurple","#9370DB"],["mediumseagreen","#3CB371"],["mediumslateblue","#7B68EE"],["mediumspringgreen","#00FA9A"],["mediumturquoise","#48D1CC"],["mediumvioletred","#C71585"],["midnightblue","#191970"],["mintcream","#F5FFFA"],["mistyrose","#FFE4E1"],["moccasin","#FFE4B5"],["navajowhite","#FFDEAD"],["navy","#000080"],["oldlace","#FDF5E6"],["olive","#808000"],["olivedrab","#6B8E23"],["orange","#FFA500"],["orangered","#FF4500"],["orchid","#DA70D6"],["palegoldenrod","#EEE8AA"],["palegreen","#98FB98"],["paleturquoise","#AFEEEE"],["palevioletred","#DB7093"],["papayawhip","#FFEFD5"],["peachpuff","#FFDAB9"],["peru","#CD853F"],["pink","#FFC0CB"],["plum","#DDA0DD"],["powderblue","#B0E0E6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#FF0000"],["rosybrown","#BC8F8F"],["royalblue","#4169E1"],["saddlebrown","#8B4513"],["salmon","#FA8072"],["sandybrown","#F4A460"],["seagreen","#2E8B57"],["seashell","#FFF5EE"],["sienna","#A0522D"],["silver","#C0C0C0"],["skyblue","#87CEEB"],["slateblue","#6A5ACD"],["slategray","#708090"],["snow","#FFFAFA"],["springgreen","#00FF7F"],["steelblue","#4682B4"],["tan","#D2B48C"],["teal","#008080"],["thistle","#D8BFD8"],["tomato","#FF6347"],["turquoise","#40E0D0"],["violet","#EE82EE"],["wheat","#F5DEB3"],["white","#FFFFFF"],["whitesmoke","#F5F5F5"],["yellow","#FFFF00"],["yellowgreen","#9ACD32"]]),y=/^rgb\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)\s*$/i,b=/^rgba\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([0,1](?:\.\d*)?)\s*\)\s*$/i,m=/^#([0-9,a-f,A-F]{2})([0-9,a-f,A-F]{2})([0-9,a-f,A-F]{2})\s*$/i,g=function(){function t(e){a(this,t);for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];this.initializer.apply(this,[e].concat(n))}return d(t,[{key:"initializer",value:function(t){this._color=0,t&&(this.value=t)}},{key:"isTransparent",value:function(){return s(this._color)<1}},{key:"value",set:function(t){return this._color=c(t),this},get:function(){return l(this._color)}},{key:"packedValue",set:function(t){return this._color=0,this._color|=t,this},get:function(){return this._color}},{key:"opacity",set:function(t){if("number"!=typeof t)throw new Error("Opacity must be a number between 0-1");var e=255&this._color,r=u(t);return r!==e&&(this._color&=4294967040,this._color|=r),this},get:function(){return s(this._color)}}]),t}();e.default=g},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){var e=(0,s.createEventedColorRGBAClass)(t,"fillColor");return(0,c.default)(null,h,function(){function t(){i(this,t)}return a(t,[{key:"initializer",value:function(t){this._fillColor=new e("red",this),this._initFillStyleFromOptions(t)}}]),t}())}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();e.createEventedFillStyleMixin=o;var s=r(16),u=n(s),l=r(7),c=n(l),h=function(){function t(e){i(this,t),this.initializer(e)}return a(t,[{key:"_initFillStyleFromOptions",value:function(t){t&&("undefined"!=typeof t.fillColor&&(this.fillColor=t.fillColor),"undefined"!=typeof t.fillOpacity&&(this.fillOpacity=t.fillOpacity))}},{key:"initializer",value:function(t){this._fillColor=new u.default("black"),this._initFillStyleFromOptions(t)}},{key:"isFillVisible",value:function(){return this._fillColor.opacity>0}},{key:"isTransparent",value:function(){return this._fillColor.isTransparent()}},{key:"setFillCtx",value:function(t){t.fillStyle=this.fillColor}},{key:"fillColor",set:function(t){return this._fillColor.value=t,this},get:function(){return this._fillColor.value}},{key:"fillOpacity",set:function(t){return this._fillColor.opacity=t,this},get:function(){return this._fillColor.opacity}},{key:"packedFillColor",set:function(t){return this._fillColor.packedValue=t,this},get:function(){return this._fillColor.packedValue}}],[{key:"copyFillStyle",value:function(t,e){"undefined"==typeof t.packedFillColor?("undefined"!=typeof t.fillColor&&(e.fillColor=t.fillColor),"undefined"!=typeof t.fillOpacity&&(e.fillOpacity=t.fillOpacity)):e.packedFillColor=t.packedFillColor}},{key:"compareFillStyle",value:function(t,e){var r=t.isFillVisible(),n=e.isFillVisible();return r!==n?r-n:t.packedFillColor-e.packedFillColor}},{key:"toJSON",value:function(t){return{fillColor:t.fillColor}}}]),t}();e.default=h},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){if("number"!=typeof t)throw new Error("Stroke width must be a number")}function a(t){var e=-1;if("string"!=typeof t||(e=y.indexOf(t.toLowerCase()))<0)throw new Error("Line join must be a string and must be one of ["+y.join(", ")+"]");return e}function s(t){var e=-1;if("string"!=typeof t||(e=m.indexOf(t.toLowerCase()))<0)throw new Error("Line cap must be a string and must be one of ["+m.join(", ")+"]");return e}function u(t){if(!t||!Array.isArray(t)||t.length%2!==0)throw new Error("The dash pattern must be an array with an even number of numbers (or an empty array)")}function l(t){if("number"!=typeof t)throw new Error("The dash offset must be a number")}function c(t){var e=(0,f.createEventedColorRGBAClass)(t,"strokeColor");return(0,v.default)(null,g,function(){function r(){i(this,r)}return h(r,[{key:"initializer",value:function(t){this._strokeColor=new e("black",this),this._strokeWidth=0,this._lineJoin=_.MITER,this._lineCap=b.BUTT,this._dashPattern=[],this._dashOffset=0,this._initStrokeStyleFromOptions(t)}},{key:"strokeWidth",set:function(e){if(o(e),e!==this._strokeWidth){var r=this._strokeWidth;this._strokeWidth=e,this.fire(t,{attr:"strokeWidth",prevVal:r,curral:this._strokeWidth})}return this},get:function(){return this._strokeWidth}},{key:"lineJoin",set:function(e){var r=a(e);if(r!==this._lineJoin){var n=this._lineJoin;this._lineJoin=r,this.fire(t,{attr:"lineJoin",prevVal:n,curral:this._lineJoin})}return this},get:function(){return y[this._lineJoin]}},{key:"lineCap",set:function(e){var r=s(e);if(r!==this._lineCap){var n=this._lineCap;this._lineCap=r,this.fire(t,{attr:"lineCap",prevVal:n,curral:this._lineCap})}return this},get:function(){return m[this._lineCap]}},{key:"dashPattern",set:function(e){u(e);var r=!1;if(e.length===this._dashPattern.length){for(var n=0;n<e.length;n+=1)if(e[n]!==this._dashPattern[n]){r=!0;break}}else r=!0;if(r){var i=this._dashPattern;this._dashPattern=e.slice(),this.fire(t,{attr:"dashPattern",prevVal:i,curral:this._dashPattern.slice()})}return this},get:function(){return this._dashPattern.slice()}},{key:"dashOffset",set:function(e){if(l(e),e!==this._dashOffset){var r=this._dashOffset;this._dashOffset=e,this._dashPattern.length&&this.fire(t,{attr:"dashOffset",prevVal:r,curral:this._dashOffset})}return this},get:function(){return this._dashOffset}}]),r}())}Object.defineProperty(e,"__esModule",{value:!0});var h=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();e.createEventedStrokeStyleMixin=c;var f=r(16),d=n(f),p=r(7),v=n(p),_={MITER:0,BEVEL:1,ROUND:2},y=["miter","bevel","round"],b={BUTT:0,SQUARE:1,ROUND:2},m=["butt","square","round"],g=function(){function t(e){i(this,t),this.initializer(e)}return h(t,[{key:"_initStrokeStyleFromOptions",value:function(t){t&&("undefined"!=typeof t.strokeColor&&(this.strokeColor=t.strokeColor),"undefined"!=typeof t.strokeOpacity&&(this.strokeOpacity=t.strokeOpacity),"undefined"!=typeof t.strokeWidth&&(this.strokeWidth=t.strokeWidth),"undefined"!=typeof t.lineMiter&&(this.lineJoin=t.lineMiter),"undefined"!=typeof t.lineCap&&(this.lineCap=t.lineCap),"undefined"!=typeof t.dashPattern&&(this.dashPattern=t.dashPattern),"undefined"!=typeof t.dashOffset&&(this.dashOffset=t.dashOffset))}},{key:"initializer",value:function(t){this._strokeColor=new d.default("black"),this._strokeWidth=0,this._lineJoin=_.MITER,this._lineCap=b.BUTT,this._dashPattern=[],this._dashOffset=0,this._initStrokeStyleFromOptions(t)}},{key:"isStrokeVisible",value:function(){return this._strokeColor.opacity>0&&this._strokeWidth>0}},{key:"isTransparent",value:function(){return this._strokeColor.isTransparent()}},{key:"setStrokeCtx",value:function(t){t.strokeStyle=this.strokeColor,t.lineWidth=this._strokeWidth,t.lineJoin=this._lineJoin,t.lineCap=this._lineCap,t.setLineDash(this._dashPattern),t.lineDashOffset=this._dashOffset}},{key:"strokeColor",set:function(t){return this._strokeColor.value=t,this},get:function(){return this._strokeColor.value}},{key:"strokeOpacity",set:function(t){this._strokeColor.opacity=t},get:function(){return this._strokeColor.opacity}},{key:"packedStrokeColor",set:function(t){this._strokeColor.packedValue=t},get:function(){return this._strokeColor.packedValue}},{key:"strokeWidth",set:function(t){return o(t),this._strokeWidth=t,this},get:function(){return this._strokeWidth}},{key:"lineJoin",set:function(t){var e=a(t);return this._lineJoin=e,this},get:function(){return y[this._lineJoin]}},{key:"lineCap",set:function(t){var e=s(t);return this._lineCap=e,this},get:function(){return m[this._lineJoin]}},{key:"dashPattern",set:function(t){return u(t),this._dashPattern=t.slice(),this},get:function(){return this._dashPattern.slice()}},{key:"dashOffset",set:function(t){return l(t),this._dashOffset=t,this},get:function(){return this._dashOffset}}],[{key:"copyStrokeStyle",value:function(t,e){"undefined"==typeof t.packedStrokeColor?("undefined"!=typeof t.strokeColor&&(e.strokeColor=t.strokeColor),"undefined"!=typeof t.strokeOpacity&&(e.strokeOpacity=t.strokeOpacity)):e.packedStrokeColor=t.packedStrokeColor,"undefined"!=typeof t.strokeWidth&&(e.strokeWidth=t.strokeWidth),"undefined"!=typeof t.lineJoin&&(e.lineJoin=t.lineJoin),"undefined"!=typeof t.lineCap&&(e.lineCap=t.lineCap),"undefined"!=typeof t.dashPattern&&(e.dashPattern=t.dashPattern),"undefined"!=typeof t.dashOffset&&(e.dashOffset=t.dashOffset)}},{key:"compareStrokeStyle",value:function(t,e){var r=t.isStrokeVisible(),n=e.isStrokeVisible();if(r!==n)return r-n;if(r=t.packedStrokeColor,n=e.packedStrokeColor,r!==n)return r-n;if(r=t.strokeWidth,n=e.strokeWidth,r!==n)return r-n;if(r=t._lineJoin,n=e._lineJoin,r!==n)return r-n;if(r=t._lineCap,n=e._lineCap,r!==n)return r-n;if(r=t._dashPattern,n=e._dashPattern,r.length===n.length&&r.length>0){for(var i=0;i<r.length;i+=1)if(r[i]!==n[i])return r[i]-n[i];return t.dashOffset-e.dashOffset}return r.length-n.length}},{key:"toJSON",value:function(t){return{strokeColor:t.strokeColor,strokeWidth:t.strokeWidth,lineJoin:t.lineJoin,lineCap:t.lineCap,dashPattern:t.dashPattern,dashOffset:t.dashOffset}}}]),t}();e.default=g},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY;var r=e.getBoundingClientRect();return t.offsetX=t.touches[0].clientX-r.left,t.offsetY=t.touches[0].clientY-r.top,t}function l(t,e,r){var n=t.getBoundingClientRect(),i=0,o=0,a=(i=e-n.left-t.clientLeft)>=0&&i<=t.clientWidth&&(o=r-n.top-t.clientTop)>=0&&o<=t.clientHeight;return a}function c(t,e,r){var n=e.getBoundingClientRect();t[0]=r.clientX-n.left-e.clientLeft,t[1]=r.clientY-n.top-e.clientTop}function h(t,e,r,n){c(H,t,e),k.transformMat2d(U,H,n.screenToWorldMatrix);var i=r.shape;i instanceof B.default?x.transformXformShape(i,r,H,U,n):i instanceof R.default?x.translateVert(i,r,H,U,n):x.translateShape(i,r,H,U,n)}function f(t,e){e.keys={altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey}}function d(t){var e=[];return t.forEach(function(t,r){e.push(r)}),e}function p(t,e,r,n,i,o){var a={unselectedShapes:d(r)};v(r),t.save();var s=e[e.length-1].zIndex;t.zIndex=s+1,P.default.copyBasicStyle(n,t),t.selected=!0;var u=null;return(o.scalable||o.rotatable)&&(u=new B.default(i||G,o),t.addChildXform(u)),r.set(t,u),a.selectedShapes=[t],a}function v(t){t.forEach(function(t,e){e.restore(),e.selected=!1,e.removeChildXform(t)}),t.clear()}function _(t,e){var r=[];return e.forEach(function(e){var n=t.get(e);e.restore(),e.selected=!1,e.removeChildXform(n),t.delete(e),r.push(e)}),r}function y(t,e){var r=document.querySelector(""+("#"+e.id+" canvas")),n={x:t.offsetX+r.offsetLeft,y:t.offsetY+r.offsetTop};return n}function b(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:W.SVG_OFFSET,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:W.SVG_OFFSET,o=document.getElementById("cursor"),a=y(t,e);if(null===o){var s=document.createElement("span");s.setAttribute("id","cursor"),s.setAttribute("style","position: absolute; top: "+(a.y+"px")+"; left: "+(a.x+"px")+"; width: 28px; height: 28px; background: "+r+"; cursor: none; z-index: 10; pointer-events: none; transform: translate("+n+"px, "+i+"px)"),e.appendChild(s)}else o.style.background===r?g(t,e):(o.style.background=r,g(t,e))}function m(){var t=document.getElementById("cursor");null!==t&&t.parentNode.removeChild(t)}function g(t,e){var r=document.getElementById("cursor"),n=y(t,e);null!==r&&(r.style.top=""+(n.y+"px"),r.style.left=""+(n.x+"px"))}Object.defineProperty(e,"__esModule",{value:!0});var M=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),O=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},w=r(20),x=i(w),E=r(3),k=i(E),S=r(8),P=n(S),C=r(13),A=n(C),I=r(4),j=n(I),D=r(10),T=n(D),F=r(21),R=n(F),N=r(22),B=n(N),V="url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cg transform='rotate(<degrees>,24,24)'%3E%3Cpolygon style='fill:%23ffffff;' points='16,20 16,12 4,24 16,36 16,28 32,28 32,36 44,24 32,12 32,20 '/%3E%3Cpolygon points='14,22 14,17 7,24 14,31 14,26 34,26 34,31 41,24 34,17 34,22 '/%3E%3C/g%3E%3C/svg%3E\") no-repeat",L="url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cg transform='rotate(<degrees>,24,24)'%3E%3Cpath style='fill:%23ffffff;' d='M25.9,4C16.6,4,8.8,11.2,7.4,20.8H6.7H3.3l1.6,2.9l3.8,7.1l1.8,3.3l1.8-3.3l3.8-7.1l1.6-2.9h-3.3h-0.1 c1.3-5.7,6.1-9.9,11.7-9.9c8,0,12.1,4.4,12.1,13.1c0,7.2-5.4,13.1-12.1,13.1h-2v2V42v2h2c10.4,0,18.8-9,18.8-20 C44.7,11.7,37.5,4,25.9,4L25.9,4z'/%3E%3Cpath d='M25.9,6c10.5,0,16.8,6.7,16.8,18c0,9.9-7.5,18-16.8,18v-2.9c7.8,0,14.1-6.8,14.1-15.1c0-5.6-1.8-15.1-14.1-15.1 c-7.4,0-13.4,6.1-14,13.9h2.4l-3.8,7.1l-3.8-7.1h2.5C9.7,13.4,17,6,25.9,6'/%3E%3C/g%3E%3C/svg%3E\") no-repeat",z="url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpolygon style='fill:%23ffffff;' points='31.2,28 24.8,28 24.8,32.8 20,32.8 20,39.2 24.8,39.2 24.8,44 31.2,44 31.2,39.2 36,39.2 36,32.8 31.2,32.8 '/%3E %3Cpolygon style='fill:%23ffffff' points='12,32 12,4 32.3,24.3 20,24.3 19.7,24.6 '/%3E%3Cpolygon points='13.8,8.2 13.8,27.8 19,22.8 19.2,22.5 28,22.5 '/%3E%3Cpolyline points='29.6,29.6 29.6,34.4 34.4,34.4 34.4,37.6 29.6,37.6 29.6,42.4 26.4,42.4 26.4,37.6 21.6,37.6 21.6,34.4 26.4,34.4 26.4,29.6 29.6,29.6  '/%3E%3C/svg%3E\") no-repeat",q="url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Crect style='fill:%23ffffff;' x='20' y='32.8' width='16' height='6.4'/%3E%3Cpolygon  style='fill:%23ffffff;' points='12,32 12,4 32.3,24.3 20,24.3 19.7,24.6 '/%3E%3Cpolygon points='13.8,8.2 13.8,27.8 19,22.8 19.2,22.5 28,22.5 '/%3E%3Cpolyline points='34.4,34.4 34.4,37.6 21.6,37.6 21.6,34.4 '/%3E%3C/svg%3E\") no-repeat",Y="url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath style='fill:%23ffffff;' d='M24,17.5c-3.6,0-6.5,2.9-6.5,6.5s2.9,6.5,6.5,6.5s6.5-2.9,6.5-6.5S27.6,17.5,24,17.5L24,17.5z'/%3E%3Cpath style='fill:%23ffffff;' d='M24,4L4,24l20,20l20-20L24,4z M31.5,31.5h-15v-15h15V31.5z'/%3E%3Cpolygon points='17,34 24,40.5 31,34  '/%3E%3Cpolygon points='31,14 24,7.5 17,14     '/%3E%3Cpolygon points='14,17 7.5,24 14,31   '/%3E%3Cpolygon points='34,31 40.5,24 34,17    '/%3E%3Cpath d='M24,20c2.2,0,4,1.8,4,4s-1.8,4-4,4s-4-1.8-4-4S21.8,20,24,20'/%3E%3C/svg%3E\") no-repeat",X={SELECTION_CHANGED:"draw:selectionChanged",DRAG_BEGIN:"draw:drag:begin",DRAG_END:"draw:drag:end"},W={SVG_OFFSET:-14,QUICK_CLICK_TIME:500,RIGHT_ANGLE:90,STRAIGHT_ANGLE:180,FORTY_FIVE_ANGLE:45},H=k.create(0,0),U=k.create(0,0),G={fillColor:"white",strokeColor:"black",strokeWidth:2},J={MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEMOVE:"mousemove",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove"},K=600,Q=function(){var t=document.getElementById("cursor");null!==t&&(t.style.display="none")},$=function(){var t=document.getElementById("cursor");null!==t&&(t.style.display="block")},Z=function(t){t.target.parentNode.style.cursor="default",Q()},tt=function(t){t.target.parentNode.style.cursor="none",$()},et=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),M(e,[{key:"_touchstartCB",value:function(t){this._mousedownCB(t)}},{key:"_touchmoveCB",value:function(t){this._mousemoveCB(t)}},{key:"_touchendCB",value:function(t){this._mouseupCB(t)}},{key:"_mousedownCB",value:function(t){if(this.setDenyMouseEventFlag(t),(!this.denyMouseEvent||t.touches)&&(t.touches&&(t=u(t,this._drawCanvas),this.previousEventObj=t),l(this._drawCanvas,t.clientX,t.clientY))){this.timer=performance.now(),k.set(H,t.offsetX,t.offsetY),k.transformMat2d(U,H,this._camera.screenToWorldMatrix);var e=this._camera.worldToScreenMatrix,r=this.sortedShapes,n=-1,i=null,o=null;for(n=r.length-1;n>=0;n-=1){var a=this._objects.get(r[n]);if(r[n].selected){i=this._selectedShapes.get(r[n]),o=a;var s=null;if(i&&(s=i.containsPoint(H,U,e,this._drawCtx)).hit){if(i instanceof R.default&&t.altKey&&s.controlIndex<r[n].numVerts)r[n].removeVert(s.controlIndex),i=null;else{var c=i.parent.localXform,h=j.default.clone(c);j.default.invert(h,h);var p=k.clone(U);k.transformMat2d(p,p,h),this._dragInfo=Object.assign({rotate:Boolean(s.rotate),controlIndex:s.controlIndex,startObjectPos:p,worldToObjectMatrix:h,startLocalPos:i.parent.getPosition(),startLocalScale:i.parent.getScale(),startLocalRot:i.parent.getRotation(),shapeWidth:i.parent.width,shapeHeight:i.parent.height},o)}break}if(r[n].containsPoint(H,U,e,this._drawCtx)){i=r[n];break}}}if(n<0&&this._selectedShapes.size)this._selectedShapes.size&&this.fire(X.SELECTION_CHANGED,{unselectedShapes:d(this._selectedShapes),selectedShapes:[]}),this._dragInfo=null,v(this._selectedShapes);else if(i&&o&&(o.movable||o.rotatable||o.scalable)){var _=document.querySelector(""+("#"+this._parent.id+" > canvas"));null===_?(this._parent.addEventListener("mouseout",Q),this._parent.addEventListener("mouseover",$)):(_.addEventListener("mouseout",Z),_.addEventListener("mouseover",tt)),!this._dragInfo&&o.movable&&(this._dragInfo={startLocalPos:i.getPosition()}),this._dragInfo&&(this._dragInfo.shape=i,this._dragInfo.startPos=k.clone(H),this._dragInfo.startWorldPos=k.clone(U),this._dragInfo.objectToWorldMatrix=j.default.clone(i.globalXform),f(t,this._dragInfo),t.stopImmediatePropagation(),this.fire(X.DRAG_BEGIN,{shapes:d(this._selectedShapes)})),t.touches||t.preventDefault()}}}},{key:"_mouseupCB",value:function(t){if(this.denyMouseEvent&&!t.touches)return void this.setDenyMouseEventFlag(t);if(t.touches&&(t=this.previousEventObj),this._dragInfo&&this._dragInfo.shape){t.stopImmediatePropagation(),t.cancelable&&t.preventDefault();var e=document.querySelector(""+("#"+this._parent.id+" > canvas"));null===e?(this._parent.removeEventListener("mouseout",Q),this._parent.removeEventListener("mouseover",$)):(e.removeEventListener("mouseout",Z),e.removeEventListener("mouseover",tt)),this._dragInfo=null,this.fire(X.DRAG_END,{shapes:d(this._selectedShapes)})}else if(performance.now()-this.timer<W.QUICK_CLICK_TIME){k.set(H,t.offsetX,t.offsetY),k.transformMat2d(U,H,this._camera.screenToWorldMatrix);for(var r=this._camera.worldToScreenMatrix,n=this.sortedShapes,i=null,o=null,a=n.length-1;a>=0;a-=1)if(o=this._objects.get(n[a]),o.selectable&&n[a].containsPoint(H,U,r,this._drawCtx)){i=n[a];break}if(i&&!i.selected){var s=p(i,n,this._selectedShapes,this._selectStyle,this._xformStyle,o);this.fire(X.SELECTION_CHANGED,s)}else this._makeParentElementMovable()}t.touches&&(t.cancelable&&t.preventDefault(),Date.now()-this.firstTapTime<K&&this._dblclickCB(t)),this.firstTapTime=Date.now()}},{key:"_mousemoveCB",value:function(t){if(this.setDenyMouseEventFlag(t),(!this.denyMouseEvent||t.touches)&&(t.touches&&(t=u(t,this._drawCanvas),this.previousEventObj=t),l(this._drawCanvas,t.clientX,t.clientY)||this._dragInfo))if(this._dragInfo&&this._dragInfo.shape)g(t,this._parent),f(t,this._dragInfo),h(this._drawCanvas,t,this._dragInfo,this._camera),t.stopImmediatePropagation(),t.touches||t.preventDefault();else if(!t.buttons&&this._selectedShapes.size){k.set(H,t.offsetX,t.offsetY),k.transformMat2d(U,H,this._camera.screenToWorldMatrix);var e=this._camera.worldToScreenMatrix,r=this.sortedShapes,n=0,i=this._camera.isYFlipped();
for(n=r.length-1;n>=0;n-=1)if(r[n].selected){var o=this._objects.get(r[n]),a=this._selectedShapes.get(r[n]),s=null;this._parent.style.cursor="none";for(var c=0;c<this._parent.childNodes.length;c+=1)this._parent.childNodes[c].style.cursor="none","canvas"!==this._parent.childNodes[c].nodeName.toLowerCase()&&(this._parent.childNodes[c].style.pointerEvents="none");if(a&&(s=a.containsPoint(H,U,e,this._drawCtx)).hit){if(a instanceof B.default)if(s.rotate){var d=r[n].getRotation();i?(d*=-1,1===s.controlIndex?d-=W.RIGHT_ANGLE:0===s.controlIndex?d+=W.STRAIGHT_ANGLE:2===s.controlIndex&&(d+=W.RIGHT_ANGLE)):0===s.controlIndex?d-=W.RIGHT_ANGLE:1===s.controlIndex?d+=W.STRAIGHT_ANGLE:3===s.controlIndex&&(d+=W.RIGHT_ANGLE),b(t,this._parent,""+L.replace(/<degrees>/g,""+d))}else s.controlIndex<4?0===s.controlIndex||3===s.controlIndex?b(t,this._parent,""+V.replace(/<degrees>/g,""+(-r[n].getRotation()-W.FORTY_FIVE_ANGLE))):1!==s.controlIndex&&2!==s.controlIndex||b(t,this._parent,""+V.replace(/<degrees>/g,""+(-r[n].getRotation()+W.FORTY_FIVE_ANGLE))):s.controlIndex%2===0?b(t,this._parent,""+V.replace(/<degrees>/g,""+-r[n].getRotation())):b(t,this._parent,""+V.replace(/<degrees>/g,""+(-r[n].getRotation()+W.RIGHT_ANGLE)));else if(a instanceof R.default){this._parent.style.cursor="none";for(var p=0;p<this._parent.childNodes.length;p+=1)this._parent.childNodes[p].style.cursor="none","canvas"!==this._parent.childNodes[p].nodeName.toLowerCase()&&(this._parent.childNodes[p].style.pointerEvents="none");s.controlIndex>=r[n].numVerts?b(t,this._parent,z,-8,-6):t.altKey?b(t,this._parent,q,-8,-6):b(t,this._parent,Y,W.SVG_OFFSET,W.SVG_OFFSET)}t.stopImmediatePropagation(),t.preventDefault();break}if(r[n].containsPoint(H,U,e,this._drawCtx)){if(o&&o.movable){var v=document.getElementById("cursor");null!==v&&v.parentNode.removeChild(v),this._parent.style.cursor="move";for(var _=0;_<this._parent.childNodes.length;_+=1)this._parent.childNodes[_].style.cursor="move";t.stopImmediatePropagation(),t.preventDefault()}break}}if(n<0){m(),this._parent.style.cursor="default";for(var y=0;y<this._parent.childNodes.length;y+=1)this._parent.childNodes[y].style.cursor="default","canvas"!==this._parent.childNodes[y].nodeName.toLowerCase()&&(this._parent.childNodes[y].style.pointerEvents="auto")}}}},{key:"_clickCB",value:function(){}},{key:"_dblclickCB",value:function(t){if(l(this._drawCanvas,t.clientX,t.clientY)){k.set(H,t.offsetX,t.offsetY),k.transformMat2d(U,H,this._camera.screenToWorldMatrix);var e=this._camera.worldToScreenMatrix,r=this.sortedShapes,n=-1;for(n=r.length-1;n>=0;n-=1){var i=this._objects.get(r[n]);if(i.selectable&&r[n].containsPoint(H,U,e,this._drawCtx)){if(i.editable&&r[n]instanceof T.default){var o=r[n],a=!1;if(r[n].selected){var s=this._selectedShapes.get(r[n]);s&&(o.restore(),o.removeChildXform(s),a=!(s instanceof B.default))}o.selected=!0,o.save();var u=r[r.length-1].zIndex;o.zIndex=u+1,P.default.copyBasicStyle(this._selectStyle,o);var c=null;a?(i.rotatable||i.scalable)&&(c=new B.default(this._xformStyle||G,i),o.addChildXform(c)):(c=new R.default(o,this._xformStyle),o.addChildXform(c)),this._selectedShapes.set(o,c)}else if(!r[n].selected){var h=p(r[n],r,this._selectedShapes,this._selectStyle,this._xformStyle,i);this.fire(X.SELECTION_CHANGED,h)}break}}n<0&&this._selectedShapes.size?(this._selectedShapes.size&&this.fire(X.SELECTION_CHANGED,{unselectedShapes:d(this._selectedShapes),selectedShapes:[]}),this._dragInfo=null,v(this._selectedShapes)):t.stopImmediatePropagation(),t.cancelable&&t.preventDefault()}}},{key:"_mouseoverCB",value:function(){}},{key:"_mouseoutCB",value:function(){}},{key:"_init",value:function(t,r){this._activated=r&&r.enableInteractions,O(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_init",this).call(this,t,r,this._activated);var n=Object.getOwnPropertyNames(X).map(function(t){return X[t]});this.registerEvents(n),this._dragInfo=null,this._selectedShapes=new Map,this._selectStyle=new P.default(r&&r.selectStyle?r.selectStyle:{fillColor:"orange"}),this._xformStyle=new P.default(r&&r.xformStyle?r.xformStyle:{fillColor:"white",strokeColor:"black",strokeWidth:2}),this.timer=0}},{key:"_makeParentElementMovable",value:function(){m(),this._parent.style.cursor="default";for(var t=0;t<this._parent.childNodes.length;t+=1)this._parent.childNodes[t].style.cursor="default","canvas"!==this._parent.childNodes[t].nodeName.toLowerCase()&&(this._parent.childNodes[t].style.pointerEvents="auto")}},{key:"_renderShapes",value:function(t,e,r){var n=this,i=r.worldToScreenMatrix;e.forEach(function(e){if(e.visible&&(e.render(t,i,n._styleState),e.selected)){var r=n._selectedShapes.get(e);r&&r.render(t,i,n._styleState)}})}},{key:"selectShape",value:function(t){var e=this._objects.get(t);if(e&&e.selectable){var r=p(t,this.sortedShapes,this._selectedShapes,this._selectStyle,this._xformStyle,e);this.fire(X.SELECTION_CHANGED,r)}}},{key:"clearSelection",value:function(){if(this._selectedShapes.size){var t=d(this._selectedShapes);v(this._selectedShapes),this.fire(X.SELECTION_CHANGED,{unselectedShapes:t,selectedShapes:[]}),this._rerenderCb()}}},{key:"addShape",value:function(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t;if(Array.isArray(o)||(o=[t]),O(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addShape",this).call(this,o),o.forEach(function(t){var e=r._objects.get(t);e&&(e.selectable=!n||"undefined"==typeof n.selectable||Boolean(n.selectable),e.movable=!n||"undefined"==typeof n.movable||Boolean(n.movable),e.rotatable=!n||"undefined"==typeof n.rotatable||Boolean(n.rotatable),e.scalable=!n||"undefined"==typeof n.scalable||Boolean(n.scalable),e.uniformScaleOnly=!(!n||"undefined"==typeof n.uniformScaleOnly)&&Boolean(n.uniformScaleOnly),e.centerScaleOnly=!(!n||"undefined"==typeof n.centerScaleOnly)&&Boolean(n.centerScaleOnly),e.editable=!n||"undefined"==typeof n.editable||Boolean(n.editable))}),i){var a={unselectedShapes:d(this._selectedShapes)},s=[];o.forEach(function(t){var e=r._objects.get(t);e.selectable&&(p(t,r.sortedShapes,r._selectedShapes,r._selectStyle,r._xformStyle,e),s.push(t))}),s.length&&(a.selectedShapes=s,this.fire(X.SELECTION_CHANGED,a))}return this}},{key:"deleteShape",value:function(t){var r=t;Array.isArray(r)||(r=[t]);var n=_(this._selectedShapes,r);this.fire(X.SELECTION_CHANGED,{unselectedShapes:n,selectedShapes:d(this._selectedShapes)}),m(),this._parent.style.cursor="default";for(var i=0;i<this._parent.childNodes.length;i+=1)this._parent.childNodes[i].style.cursor="default",this._parent.childNodes[i].style.pointerEvents="auto";return O(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deleteShape",this).call(this,r)}},{key:"deleteSelectedShapes",value:function(){var t=d(this._selectedShapes);v(this._selectedShapes),this.fire(X.SELECTION_CHANGED,{unselectedShapes:t,selectedShapes:[]}),m(),this._parent.style.cursor="default";for(var r=0;r<this._parent.childNodes.length;r+=1)this._parent.childNodes[r].style.cursor="default",this._parent.childNodes[r].style.pointerEvents="auto";return O(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deleteShape",this).call(this,t)}},{key:"enableInteractions",value:function(){return this._enableEvents(),this._activated=!0,this}},{key:"disableInteractions",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t&&this.clearSelection(),this._disableEvents(),this._activated=!1,this}},{key:"setDenyMouseEventFlag",value:function(t){t.touches?this.denyMouseEvent=!0:t.type===J.MOUSEUP&&(this.denyMouseEvent=!1)}},{key:"selectStyle",set:function(t){P.default.copyBasicStyle(t,this._selectStyle)},get:function(){return this._selectStyle}},{key:"selectedShapes",get:function(){return d(this._selectedShapes)}},{key:"interactionsEnabled",get:function(){return this._activated}}]),e}(A.default);e.default=et,Object.assign(X,A.default.EventConstants),et.EventConstants=X},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e,r,n,i){var o=[0,0],a=[0,0];f.default.svd(o,a,null,r.objectToWorldMatrix);var s=[0,0];c.sub(s,r.startWorldPos,o),p.default.normalize(s,s);var u=o;c.sub(u,i,o),p.default.normalize(u,u);var l=p.default.angle(s,u);r.keys.shiftKey&&(l=Math.round(l/Math.QUATER_PI)*Math.QUATER_PI),e.setRotation(r.startLocalRot+Math.RAD_TO_DEG*l)}function a(t,e,r,n,i){var a=t.parent,s=[0,0],u=[0,0],l=[0,0];if(e.rotate)return void o(t,a,e,r,n,i);var h=e.keys.shiftKey||e.uniformScaleOnly,d=e.keys.altKey||e.centerScaleOnly,v=[0,0];if(f.default.svd(v,null,null,e.objectToWorldMatrix),p.default.sub(u,n,e.startWorldPos),h&&e.controlIndex<4){var _=[e.objectToWorldMatrix[0],e.objectToWorldMatrix[1]],y=[e.objectToWorldMatrix[2],e.objectToWorldMatrix[3]],b=[0,0];e.controlIndex<2&&p.default.negate(_,_),e.controlIndex%2===0&&p.default.negate(y,y),p.default.normalize(_,_),p.default.normalize(y,y),p.default.add(b,_,y),p.default.normalize(b,b);var m=p.default.cross2d(u,b),g=null;0===e.controlIndex||3===e.controlIndex?(g=y,m<0&&(g=_)):(g=_,m<0&&(g=y));var M=p.default.dot(u,g);M=Math.sign(M)*Math.sqrt(2*M*M),p.default.scale(u,b,M),c.addVec2(n,e.startWorldPos,u)}c.copy(s,n),c.transformMat2d(s,s,e.worldToObjectMatrix),p.default.sub(l,s,e.startObjectPos),c.copy(v,e.startLocalPos);var O=0,w=0;if(e.controlIndex<4)O=e.controlIndex<2?-1:1,w=e.controlIndex%2===0?-1:1,d||c.addVec2(v,v,p.default.scale(u,u,.5)),a.setPosition(v);else{var x=e.controlIndex-4,E=[0,0];x%2===0?(p.default.set(E,e.objectToWorldMatrix[0],e.objectToWorldMatrix[1]),w=0,O=x<2?-1:1,h&&(w=O,l[1]=l[0])):(p.default.set(E,e.objectToWorldMatrix[2],e.objectToWorldMatrix[3]),O=0,w=x<2?-1:1,h&&(O=w,l[0]=l[1])),d||(p.default.normalize(E,E),p.default.scale(E,E,p.default.dot(u,E)),c.addVec2(v,v,p.default.scale(E,E,.5))),a.setPosition(v)}d&&(O*=2,w*=2),a.setScale([e.startLocalScale[0]*(1+O*l[0]/e.shapeWidth),e.startLocalScale[1]*(1+w*l[1]/e.shapeHeight)])}function s(t,e,r,n,i){var o=[0,0],a=[0,0];if(f.default.svd(a,null,null,e.objectToWorldMatrix),e.keys.shiftKey){c.sub(o,r,e.startPos);var s=Math.atan2(o[1],o[0]);s=Math.round(s/Math.QUATER_PI)*Math.QUATER_PI;var u=[Math.cos(s),Math.sin(s)];p.default.scale(o,u,p.default.dot(o,u)),p.default.transformMat2(o,o,i.screenToWorldMatrix)}else p.default.sub(o,n,e.startWorldPos);c.addVec2(a,e.startLocalPos,o),t.setPosition(a)}function u(t,e,r,n){var i=t.parent,o=i.numVerts;if(e.controlIndex>=o){var a=Math.min(e.controlIndex-o,o-1),s=a===o-1?0:a+1,u=[0,0],l=[0,0],h=[0,0],f=[0,0],d=i.vertsRef,v=i.globalXform;c.transformMat2d(l,d[a],v),c.transformMat2d(h,d[s],v),c.sub(f,h,l),p.default.scale(f,f,.5),c.addVec2(u,l,f),e.controlIndex=i.insertVert(a+1,u)}else i.setVertPosition(e.controlIndex,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.transformXformShape=a,e.translateShape=s,e.translateVert=u;var l=r(3),c=i(l),h=r(4),f=n(h),d=r(9),p=n(d)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=r(2),c=i(l),h=r(3),f=i(h),d=r(1),p=r(6),v=n(p),_=function(t){function e(t,r){o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return n._baseVertShape=t,n._vertRadius=4,n._transformedVerts=[],n._baseaabox=c.create(),n._worldToScreenMatrix=d.mat2d.create(),n}return s(e,t),u(e,[{key:"_updateAABox",value:function(t){var e=this._baseVertShape.aabox;if(!c.equals(e,this._baseaabox)||!d.mat2d.equals(t,this._worldToScreenMatrix)){c.copy(this._baseaabox,e),d.mat2d.copy(this._worldToScreenMatrix,t),c.transformMat2d(this._aabox,this._baseaabox,this._worldToScreenMatrix);var r=this._vertRadius+this.strokeWidth;c.expand(this._aabox,this._aabox,[r,r])}}},{key:"containsPoint",value:function(t,e,r,n){var i={hit:!1,controlIndex:-1};if(this._updateAABox(r),this.visible&&c.containsPt(this._aabox,t)){var o=c.create(),a=this._vertRadius+this.strokeWidth/2,s=[a,a],u=0;for(u=0;u<this._transformedVerts.length;u+=1)if(c.initCenterExtents(o,this._transformedVerts[u],s),c.containsPt(o,t)){i.hit=!0,i.controlIndex=u;break}if(!i.hit){var l=[0,0],h=[0,0],p=1.5*n.lineWidth;for(d.vec2.set(s,p,p),u=0;u<this._transformedVerts.length-1;u+=1)if(f.sub(h,this._transformedVerts[u+1],this._transformedVerts[u]),d.vec2.scale(h,h,.5),f.addVec2(l,this._transformedVerts[u],h),c.initCenterExtents(o,l,s),c.containsPt(o,t)){i.hit=!0,i.controlIndex=this._transformedVerts.length+u;break}u>0&&u===this._transformedVerts.length-1&&(f.sub(h,this._transformedVerts[0],this._transformedVerts[u]),d.vec2.scale(h,h,.5),f.addVec2(l,this._transformedVerts[u],h),c.initCenterExtents(o,l,s),c.containsPt(o,t)&&(i.hit=!0,i.controlIndex=this._transformedVerts.length+u))}}return i}},{key:"renderBounds",value:function(t,e,r){this._updateAABox(e),t.save(),t.setTransform(1,0,0,1,0,0),r.setStrokeCtx(t);var n=[0,0],i=[0,0];c.getCenter(n,this._aabox),c.getExtents(i,this._aabox),t.beginPath(),t.rect(n[0]-i[0],n[1]-i[1],2*i[0],2*i[1]),t.stroke(),t.restore()}},{key:"render",value:function(t){var e=this;t.save(),t.setTransform(1,0,0,1,0,0);var r=this._baseVertShape._fullXform,n=this._baseVertShape.vertsRef;this._transformedVerts=new Array(n.length);var i=[0,0],o=[0,0];t.beginPath();var a=0;this._transformedVerts[a]=[0,0],f.transformMat2d(this._transformedVerts[a],n[a],r);var s=Math.max(1.5*t.lineWidth,2.5);for(a=0;a<n.length-1;a+=1)this._transformedVerts[a+1]=[0,0],f.transformMat2d(this._transformedVerts[a+1],n[a+1],r),f.sub(o,this._transformedVerts[a+1],this._transformedVerts[a]),d.vec2.scale(o,o,.5),f.addVec2(i,this._transformedVerts[a],o),t.moveTo(i[0]+s,i[1]),t.arc(i[0],i[1],s,0,Math.TWO_PI);a>0&&(f.sub(o,this._transformedVerts[0],this._transformedVerts[a]),d.vec2.scale(o,o,.5),f.addVec2(i,this._transformedVerts[a],o),t.moveTo(i[0]+s,i[1]),t.arc(i[0],i[1],s,0,Math.TWO_PI),t.fillStyle=t.strokeStyle,t.fill()),t.beginPath(),this._transformedVerts.forEach(function(r){t.moveTo(r[0]+e._vertRadius,r[1]),t.arc(r[0],r[1],e._vertRadius,0,Math.TWO_PI)}),this.isFillVisible()&&(this.setFillCtx(t),t.fill()),this.isStrokeVisible()&&(this.setStrokeCtx(t),t.stroke()),t.restore()}}]),e}(v.default);e.default=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e,r,n,i,o,a){v.transformMat2d(e,e,r),t.setTransform(1,0,0,1,0,0),t.translate(e[0],e[1]),t.rotate(o[1]),t.scale(a[0],a[1]),t.rotate(o[0]),t.translate(-e[0],-e[1]),t.rect(e[0]-i,e[1]-i,n,n)}function l(t,e,r,n,i,o,a,s,u,l){var c=!1,h=!1;if(v.transformMat2d(e,e,r),v.distance(e,t)<=s){O.default.negate(e,e),n[4]=n[0]*e[0]+n[2]*e[1],n[5]=n[1]*e[0]+n[3]*e[1];var f=0,d=0;v.transformMat2d(e,t,n),(Math.abs(e[0])<=i&&Math.abs(e[1])<=i||Boolean(u)&&Boolean(l)&&(h=(f=u*e[0])>-i&&f<=a&&(d=l*e[1])>-i&&d<=a))&&(c=!0)}return{hit:c,rotate:h}}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},f=r(2),d=i(f),p=r(3),v=i(p),_=r(11),y=r(4),b=n(y),m=r(15),g=n(m),M=r(9),O=n(M),w={SIDES:4},x=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scalable:!0,rotatable:!0};o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._interactiveBoxSize=8,n._interactiveBoxPadding=10,t&&"undefined"!=typeof t.vertexSize&&(n._interactiveBoxSize=t.vertexSize),n._scalable=!0,n._rotatable=!0,r&&("undefined"!=typeof r.scalable&&(n._scalable=Boolean(r.scalable)),"undefined"!=typeof r.rotatable&&(n._rotatable=Boolean(r.rotatable))),n}return s(e,t),c(e,[{key:"containsPoint",value:function(t){var e={hit:!1,rotate:!1,controlIndex:-1},r=this.aabox;if((this._rotatable||this._scalable)&&this.visible&&d.containsPt(r,t)){var n=[0,0],i=[0,0];b.default.svd(null,n,i,this._fullXform);var o=b.default.create();n[0]=n[0]<0?-1:1,n[1]=n[1]<0?-1:1,n[0]*n[1]>0&&O.default.negate(i,i),b.default.rotate(o,o,i[1]),b.default.scale(o,o,n),b.default.rotate(o,o,i[0]);for(var a=this._rotatable?this._interactiveBoxPadding:0,s=this._interactiveBoxSize/2,u=this.width/2,c=this.height/2,h=[0,0],f=s+a,p=Math.sqrt(2*f*f),_=0,y=0,m=0;m<w.SIDES;m+=1)if(_=m<2?-1:1,y=m%2===0?-1:1,v.set(h,_*u,y*c),e=l(t,h,this._fullXform,o,s,this._interactiveBoxSize,f,p,_,y,n),e.hit){e.controlIndex=m;break}if(!e.hit&&this._scalable)for(var g=0;g<w.SIDES;g+=1)if(_=g%2===0?g<2?-1:1:0,y=g%2===0?0:g<2?-1:1,v.set(h,_*u,y*c),e=l(t,h,this._fullXform,o,s,this._interactiveBoxSize,f,p,_,y,n),e.hit){e.controlIndex=g+w.SIDES;break}e.rotate&&!this._rotatable?e.rotate=!1:e.rotate||this._scalable||(e.rotate=!0)}return e}},{key:"_updatelocalxform",value:function(t){if(this._lxformDirty||t){var e=v.clone(this._pos);v.addVec2(e,e,this._parent.pivotRef),(0,_.buildXformMatrix)(this._localXform,this._rotDeg,this._scale,e,this._pivot),this._localXformUpdated&&this._localXformUpdated(),this._lxformDirty=!1}}},{key:"_updateglobalxform",value:function(){(this._lxformDirty||this._xformDirty)&&(this._updatelocalxform(!0),this._parent?b.default.multiply(this._globalXform,this._parent.globalXform,this._localXform):b.default.copy(this._globalXform,this._localXform),this._globalXformUpdated&&this._globalXformUpdated(),this._xformDirty=!1)}},{key:"_updateAABox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t||this._geomDirty||this._boundsOutOfDate){var e=this._rotatable?this._interactiveBoxPadding:0,r=e+this._interactiveBoxSize/2;d.initCenterExtents(this._aabox,[0,0],[this.width/2,this.height/2]),d.transformMat2d(this._aabox,this._aabox,this._fullXform),d.expand(this._aabox,this._aabox,[r,r]),this._aaboxUpdated=!0,this._geomDirty=this._boundsOutOfDate=!1}}},{key:"renderBounds",value:function(t,e,r){var n=this.aabox;t.save(),t.setTransform(1,0,0,1,0,0),r.setStrokeCtx(t);var i=[0,0],o=[0,0];d.getCenter(i,n),d.getExtents(o,n),t.beginPath(),t.rect(i[0]-o[0],i[1]-o[1],2*o[0],2*o[1]),t.stroke(),t.restore()}},{key:"render",value:function(t,r,n){if(this.parent&&"undefined"!=typeof this.parent.width&&"undefined"!==this.parent.height){this._aaboxUpdated=!1,h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this,t,r,n,!1),this._aaboxUpdated||this._updateAABox(!0);var i=[0,0],o=[0,0];b.default.svd(null,i,o,this._fullXform),i[0]=i[0]<0?-1:1,i[1]=i[1]<0?-1:1;var a=this._interactiveBoxSize/2,s=this.width/2,l=this.height/2,c=[s,l];t.save(),t.beginPath(),u(t,c,this._fullXform,this._interactiveBoxSize,a,o,i,"3"),v.set(c,s,-l),u(t,c,this._fullXform,this._interactiveBoxSize,a,o,i,"2"),v.set(c,-s,-l),u(t,c,this._fullXform,this._interactiveBoxSize,a,o,i,"0"),v.set(c,-s,l),u(t,c,this._fullXform,this._interactiveBoxSize,a,o,i,"1"),this._scalable&&(v.set(c,0,l),u(t,c,this._fullXform,this._interactiveBoxSize,a,o,i),v.set(c,0,-l),u(t,c,this._fullXform,this._interactiveBoxSize,a,o,i),v.set(c,s,0),u(t,c,this._fullXform,this._interactiveBoxSize,a,o,i),v.set(c,-s,0),u(t,c,this._fullXform,this._interactiveBoxSize,a,o,i)),this.isFillVisible()&&(n.setFillStyle(t,this),t.fill()),this.isStrokeVisible()&&(n.setStrokeStyle(t,this),t.setTransform(1,0,0,1,0,0),t.stroke()),t.restore()}}},{key:"width",get:function(){return this.parent&&"undefined"!==this.parent.width?this.parent.width:0}},{key:"height",get:function(){return this.parent&&"undefined"!==this.parent.height?this.parent.height:0}}]),e}(g.default);e.default=x},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},c=r(2),h=i(c),f=r(6),d=n(f),p=r(5),v=n(p),_=function(t){function e(t){o(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r._radius=10,"undefined"!=typeof t.radius&&(r.radius=t.radius),h.initCenterExtents(r._aabox,[0,0],[r._radius,r._radius]),r}return s(e,t),u(e,[{key:"getDimensions",value:function(){var t=2*this.radius;return[t,t]}},{key:"_updateAABox",value:function(){if(this._geomDirty||this._boundsOutOfDate){var t=this._pos,e=this._scale,r=v.default.DEG_TO_RAD*this._rotDeg,n=v.default.pow(v.default.cos(r),2),i=v.default.pow(v.default.sin(r),2),o=v.default.pow(e[0]*this._radius,2),a=v.default.pow(e[1]*this._radius,2),s=v.default.sqrt(a*i+o*n),u=v.default.sqrt(o*i+a*n);h.initCenterExtents(this._aabox,t,[s,u]),this._geomDirty=!1,this._boundsOutOfDate=!1}}},{key:"_draw",value:function(t){t.arc(0,0,this._radius,0,v.default.TWO_PI,!1)}},{key:"toJSON",value:function(){return Object.assign({type:"Circle",radius:this.radius},l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"toJSON",this).call(this))}},{key:"radius",set:function(t){if("number"!=typeof t)throw new Error("Radius must be a number");if(t!==this._radius){var e=this._radius;this._radius=t,this._geomDirty=!0,this.fire("changed:geom",{attr:"radius",prevVal:e,currVal:this._radius})}return this},get:function(){return this._radius}},{key:"width",get:function(){return 2*this.radius}},{key:"height",get:function(){return 2*this.radius}}]),e}(d.default);e.default=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},c=r(2),h=i(c),f=r(6),d=n(f),p=r(4),v=n(p),_=r(5),y=n(_),b=function(t){function e(t){o(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r._size=5,"undefined"!=typeof t.size&&(r.size=t.size),h.initCenterExtents(r._aabox,[0,0],[r._radius,r._radius]),r.translate(t.x||0,t.y||0),r}return s(e,t),u(e,[{key:"_updateAABox",value:function(){if(this._geomDirty||this._boundsOutOfDate){var t=this._pos,e=this._scale,r=y.default.DEG_TO_RAD*this._rotDeg,n=y.default.pow(y.default.cos(r),2),i=y.default.pow(y.default.sin(r),2),o=y.default.pow(e[0]*this._size,2),a=y.default.pow(e[1]*this._size,2),s=y.default.sqrt(a*i+o*n),u=y.default.sqrt(o*i+a*n);h.initCenterExtents(this._aabox,t,[s,u]),this._geomDirty=!1,this._boundsOutOfDate=!1}}},{key:"_draw",value:function(t){t.setTransform(1,0,0,1,0,0);var e=[0,0];v.default.svd(e,null,null,this._fullXform),t.arc(e[0],e[1],this._size,0,y.default.TWO_PI,!1)}},{key:"toJSON",value:function(){return Object.assign({type:"Point",size:this.size},l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"toJSON",this).call(this))}},{key:"size",set:function(t){if("number"!=typeof t)throw new Error("Radius must be a number");if(t!==this._size){var e=this._size;this._size=t,this._geomDirty=!0,this.fire("changed:geom",{attr:"size",prevVal:e,currVal:this._size})}},get:function(){return this._size}}]),e}(d.default);e.default=b},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=r(10),c=n(l),h={MINIMUM_POINTS:3},f=function(t){function e(t){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));if(r._verts.length<h.MINIMUM_POINTS)throw new Error("Poly shapes must be initialized with an array of 2d points and contain at least 3 points");return r}return a(e,t),s(e,[{key:"removeVert",value:function(t){if(this._verts.length<h.MINIMUM_POINTS)throw new Error("Cannot remove vertex "+t+". It would result in a poly with < 3 points. A poly must contain at least 3 points.");u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeVert",this).call(this,t)}},{key:"_draw",value:function(t){var e=!1;if(this._verts.length>=h.MINIMUM_POINTS){t.moveTo(this._verts[0][0],this._verts[0][1]);for(var r=1;r<this._verts.length;r+=1)t.lineTo(this._verts[r][0],this._verts[r][1]);t.closePath(),e=!0}return e}},{key:"toJSON",value:function(){return Object.assign(u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"toJSON",this).call(this),{type:"Poly"})}}]),e}(c.default);e.default=f},function(t,e){"use strict";function r(t){var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e}function n(t){var e=r(t);if(1===e)return 1;var n=["fillRect","clearRect","strokeRect","isPointInPath","isPointInStroke"];n.forEach(function(r){t[r]=function(t){return function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return n=n.map(function(t){return t*e}),t.apply(this,n)}}(t[r])});var i=[e,0,0,e,0,0];return t.setTransform=function(t){return function(){t.apply(this,i),this.transform.apply(this,arguments)}}(t.setTransform),e}Object.defineProperty(e,"__esModule",{value:!0}),e.getPixelRatio=r,e.makeCanvasAutoHighDPI=n},function(t,e){"use strict";function r(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}Object.defineProperty(e,"__esModule",{value:!0}),e.bindAll=r},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=r(2),c=i(l),h=r(7),f=n(h),d=r(11),p=r(12),v=n(p),_=r(4),y=n(_),b=r(1),m=function(t){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,["changed","changed:xform"]));return i._viewport=c.clone(t),i._projectionDimensions=b.vec2.clone(r),i._yflip=n,i._screenMatrix=y.default.create(),i._screenDirty=!0,i}return s(e,t),u(e,[{key:"isYFlipped",value:function(){return this._yflip}},{key:"viewport",set:function(t){if(!c.equals(t,this._viewport)){var e=c.clone(this._viewport);c.copy(this._viewport,t),
this._screenDirty=!0,this._worldToScreenOutdated=!0,this.fire("changed",{attr:"viewport",prevVal:e,currVal:t})}return this},get:function(){return c.clone(this._viewport)}},{key:"viewportRef",get:function(){return this._viewport}},{key:"screenMatrix",get:function(){if(this._screenDirty){var t=[0,0],e=[0,0];c.getCenter(t,this._viewport),c.getExtents(e,this._viewport),y.default.set(this._screenMatrix,e[0],0,0,e[1],t[0],t[1]),this._worldToScreenOutdated=!0,this._screenDirty=!1}return this._screenMatrix}}]),e}(v.default),g=function(t){function e(t,r,n){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,n));return i._viewMatrix=y.default.create(),i._viewDirty=!0,i._projMatrix=y.default.create(),i._projDirty=!0,i}return s(e,t),u(e,[{key:"_localXformUpdated",value:function(){this._boundsOutOfDate=!0}},{key:"_globalXformUpdated",value:function(){this._boundsOutOfDate=!0}},{key:"_matricesDirty",value:function(){return this._boundsOutOfDate||this._lxformDirty||this._xformDirty||this._viewDirty||this._projDirty||this._screenDirty}},{key:"projectionDimensions",set:function(t){if(!b.vec2.equals(t,this._projectionDimensions)){var e=b.vec2.clone(this._projectionDimensions);c.copy(this._projectionDimensions,t),this._viewDirty=!0,this._projDirty=!0,this.fire("changed",{attr:"projectionDimensions",prevVal:e,currVal:t})}return this},get:function(){return b.vec2.clone(this._projectionDimensions)}},{key:"projectionDimensionsRef",get:function(){return this._projectionDimensions}},{key:"viewMatrix",get:function(){if(this._viewDirty||this._boundsOutOfDate||this._xformDirty||this._lxformDirty){var t=[0,0],e=[0,0],r=[0,0],n=this.globalXform;y.default.svd(t,e,r,n),y.default.fromTranslation(this._viewMatrix,b.vec2.negate(t,t)),y.default.rotate(this._viewMatrix,this._viewMatrix,-r[0]),y.default.scale(this._viewMatrix,this._viewMatrix,e),y.default.rotate(this._viewMatrix,this._viewMatrix,-r[1]),this._worldToScreenOutdated=!0,this._viewDirty=!1}return this._viewMatrix}},{key:"projMatrix",get:function(){if(this._projDirty){var t=this._yflip?-1:1;y.default.set(this._projMatrix,2/this._projectionDimensions[0],0,0,2*t/this._projectionDimensions[1],0,0),this._worldToScreenOutdated=!0,this._projDirty=!1}return this._projMatrix}},{key:"worldToScreenMatrix",get:function(){return(!this._worldToScreenMatrix||this._worldToScreenOutdated||this._matricesDirty())&&(this._worldToScreenMatrix||(this._worldToScreenMatrix=y.default.create()),y.default.copy(this._worldToScreenMatrix,this.viewMatrix),y.default.multiply(this._worldToScreenMatrix,this.projMatrix,this._worldToScreenMatrix),y.default.multiply(this._worldToScreenMatrix,this.screenMatrix,this._worldToScreenMatrix),this._worldToScreenOutdated=!1,this._screenToWorldOutdated=!0),this._worldToScreenMatrix}},{key:"screenToWorldMatrix",get:function(){return(!this._screenToWorld||this._screenToWorldOutdated||this._matricesDirty())&&(this._screenToWorld||(this._screenToWorld=y.default.create()),y.default.copy(this._screenToWorld,this.worldToScreenMatrix),y.default.invert(this._screenToWorld,this._screenToWorld),this._screenToWorldOutdated=!1),this._screenToWorld}}]),e}((0,f.default)(m,(0,d.createEventedTransform2dMixin)("changed:xform")));e.default=g},function(t,e,r){var n,i;!function(o,a){n=a,i="function"==typeof n?n.call(e,r,e,t):n,!(void 0!==i&&(t.exports=i))}(this,function(){function t(t,e){var r=Object.prototype.toString.call(t),n="[object Array]"===r||"[object NodeList]"===r||"[object HTMLCollection]"===r||"[object Object]"===r||"undefined"!=typeof jQuery&&t instanceof jQuery||"undefined"!=typeof Elements&&t instanceof Elements,i=0,o=t.length;if(n)for(;i<o;i++)e(t[i]);else e(t)}if("undefined"==typeof window)return null;var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)},r=function(n,i){function o(){var t=[];this.add=function(e){t.push(e)};var e,r;this.call=function(){for(e=0,r=t.length;e<r;e++)t[e].call()},this.remove=function(n){var i=[];for(e=0,r=t.length;e<r;e++)t[e]!==n&&i.push(t[e]);t=i},this.length=function(){return t.length}}function a(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]}function s(t,r){if(t.resizedAttached){if(t.resizedAttached)return void t.resizedAttached.add(r)}else t.resizedAttached=new o,t.resizedAttached.add(r);t.resizeSensor=document.createElement("div"),t.resizeSensor.className="resize-sensor";var n="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",i="position: absolute; left: 0; top: 0; transition: 0s;";t.resizeSensor.style.cssText=n,t.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+n+'"><div style="'+i+'"></div></div><div class="resize-sensor-shrink" style="'+n+'"><div style="'+i+' width: 200%; height: 200%"></div></div>',t.appendChild(t.resizeSensor),"static"==a(t,"position")&&(t.style.position="relative");var s,u,l,c,h=t.resizeSensor.childNodes[0],f=h.childNodes[0],d=t.resizeSensor.childNodes[1],p=t.offsetWidth,v=t.offsetHeight,_=function(){f.style.width="100000px",f.style.height="100000px",h.scrollLeft=1e5,h.scrollTop=1e5,d.scrollLeft=1e5,d.scrollTop=1e5};_();var y=function(){u=0,s&&(p=l,v=c,t.resizedAttached&&t.resizedAttached.call())},b=function(){l=t.offsetWidth,c=t.offsetHeight,s=l!=p||c!=v,s&&!u&&(u=e(y)),_()},m=function(t,e,r){t.attachEvent?t.attachEvent("on"+e,r):t.addEventListener(e,r)};m(h,"scroll",b),m(d,"scroll",b)}t(n,function(t){s(t,i)}),this.detach=function(t){r.detach(n,t)}};return r.detach=function(e,r){t(e,function(t){t.resizedAttached&&"function"==typeof r&&(t.resizedAttached.remove(r),t.resizedAttached.length())||t.resizeSensor&&(t.contains(t.resizeSensor)&&t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)})},r})},function(t,e){t.exports={name:"@mapd/mapd-draw",description:"A Utility Library for drawing and interacting with shapes using canvas",version:"1.1.0",homepage:"https://omnisci.com",bugs:"https://github.com/omnisci/mapd-draw/issues",main:"dist/mapd-draw.js",author:"MapD Technologies",license:"MIT",engines:{node:">=4.0.0"},repository:{type:"git",url:"git+https://github.com/omnisci/mapd-draw.git"},dependencies:{"gl-matrix":"^2.3.2","css-element-queries":"^0.4.0"},devDependencies:{"babel-core":"^6.10.4","babel-eslint":"^10.0.1","babel-loader":"^6.2.4","babel-preset-es2015":"^6.9.0","babel-preset-stage-0":"^6.5.0","babel-register":"^6.24.1",chai:"^3.5.0",eslint:"^3.0.1","eslint-plugin-react":"^7.12.4","http-server":"^0.11.1","json-loader":"0.5.4",mocha:"^6.0.2","pre-commit":"^1.2.2",webpack:"^1.13.1"},scripts:{build:"npm run build:prod; npm run build:dev","build:prod":"npm run webpack","build:dev":"npm run webpack:dev",clean:"bash scripts/clean.sh",eslint:"eslint -c ./.eslintrc.json","lint-fix":"eslint --fix $(find src -name \"*.js\" ! -name '*.spec.js')",lint:"eslint $(find src -name \"*.js\" ! -name '*.spec.js')",start:"npm run build; http-server -p 8080 -o;","watch:dev":"node node_modules/webpack/bin/webpack.js --progress --colors --watch --config webpack.dev.config.js",webpack:"node node_modules/webpack/bin/webpack.js","webpack:dev":"node node_modules/webpack/bin/webpack.js --config webpack.dev.config.js",test:"mocha --recursive --require babel-register"},"pre-commit":["lint","test"]}}])});
//# sourceMappingURL=mapd-draw.js.map